/* Copyright (C) 2012-2016 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.2.1 gitCommitId 148dde32bbb4ad4c26c7b87d272ca3fc2b45c57b (scopedglobals,util,async,resource,controller,dataModel,view,modelWithBinding,validation,ui,api.geo,api.sqldb,api.storage,scene) */
(function(a){var ia,Ha,sa,Aa;function m(a,e,h){var j=null,m=Ba[a],l=yb[a];l&&(j=l(a,m,e,h));!j&&m&&(j=g.u.str.format.apply(null,[m].concat(e)));j&&(j+="(code="+a+")");e=j?Error(j):Error("FwError: code = "+a);a&&(e.code=a);h&&(e.detail=h);throw e;}function zb(a){for(var e in a)a.hasOwnProperty(e)&&(Ba[e]=a[e])}function ea(a,e,h){var j=null,m=Ba[a];m&&(e=[m].concat(e),j=g.u.str.format.apply(null,e));return{code:a,message:j,detail:h}}function K(a){return null==a?a:E(a)?a:[a]}function u(a){return"string"===
typeof a}function xa(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function Qa(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ya(a){return!u(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function Ia(c){if("regexp"===a.type(c))return c;var e="",e=-1!==c.indexOf("*")?a.map(c.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):c;return RegExp("^"+e+"$")}function ta(a,e,h){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(e,h):a[e](h))}function ga(c,e,h,j){return c[a.hasOwnProperty("curCSS")?
"pipe":"then"](e,h,j)}function ub(a){return a&&a.document&&a.document.nodeType===lb&&V(a.document)===a}function O(a){return typeof a.nodeType===ka?ub(a)?a.document:null:a.nodeType===lb?a:a.ownerDocument}function V(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ja(c,e,h,j){function m(b){return function(){if(!y._rejected){var d=g.u.obj.argsToArray(arguments),f=a.inArray(b,c);C[f]=2>d.length?d[0]:d;++y._resolveCount===y._promisesLength&&y._doneCallbackExecuter()}}}var l=
c?c.length:0,q=g.async.isPromise,y=this,C=null;this._doneCallbackExecuter=function(){y._resolved=!0;e&&(C?e.call(this,C):e.apply(this,arguments))};this._failCallbackExecuter=function(){y._rejected=!0;h?h.apply(this,arguments):j&&g.settings.commonFailHandler&&g.settings.commonFailHandler.call(this,arguments)};if(1===l||q(c)){var B=1===l?c[0]:c;q(B)?(this.remove=function(a){!this._resolved&&!this._rejected&&B===a&&this._doneCallbackExecuter()},B.done(this._doneCallbackExecuter),B.fail(this._failCallbackExecuter)):
this._doneCallbackExecuter()}else{for(var l=[],d=0,n=c.length;d<n;d++){var b=c[d];q(b)&&l.push(b)}q=l.length;if(0===q)this._resolved=!0,e&&e();else{this._promises=l;C=[];this._resolveArgs=[];this._resolveCount=0;this._promisesLength=q;for(d=0;d<q;d++)n=l[d],n.done(m(n)).fail(this._failCallbackExecuter)}}}function fa(a,e,h,j){return new Ja(a,e,h,j)}var vb=void 0;if(window.h5){if(window.h5.env&&"1.2.1"===window.h5.env.version)return;vb=window.h5}var g={};window.h5=g;g.coexist=function(){window.h5=vb;
return g};g.env={version:"1.2.1"};var Ba={},yb={},wb=12029,ka="undefined",ba=1,lb=9,R=function(){var a=null,e=null,h=null;return function(j){a||(a=document.createElement("a"));null===h&&(a.setAttribute("href","./"),h="./"!==a.href);if(h)return a.setAttribute("href",j),a.href;e||(e=document.createElement("span"));e.innerHTML='<a href="'+j+'" />';return e.firstChild.href}}();parseHTML=a.parseHTML?a.parseHTML:function(c,e,h){if(!c||!u(c))return null;"boolean"===typeof e&&(h=e,e=!1);e=e||document;c=a("<div>"+
c+"</div>",e);h||c.find("script").remove();for(var h=c[0].childNodes,e=e.createDocumentFragment(),c=0,j=h.length;c<j;c++)e.appendChild(h[c]);return e.childNodes};var E=Array.isArray||function(){var a=Object.prototype.toString;return function(e){return"[object Array]"===a.call(e)}}(),F=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(e){return"[object Function]"===a.call(e)}}return function(a){return"function"===typeof a}}();Ja.prototype=a.extend(Ja.prototype,
{remove:function(c){if(!this._resolved&&!this._rejected)if(promsie===this._promises)this._doneCallback&&doneCallback(),this._resolved=!0;else{var e=a.inArray(c,this._promises);-1!==e&&(this._promises.splice(e,1),this._resolveArgs.splice(e,1),Qa(c)||(this._promisesLength--,that._resolveCount===this._promisesLength&&this._doneCallbackExecuter()))}}});ia={controllerInternal:null};Aa=sa=Ha=void 0;(function(){function c(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";
case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case d:return"u";case "undefElem":return"_";case "objElem":return"@"}}function e(a,b){if(u(a)){var d=a;b&&(d=d.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,
"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(e(a.toString())):a}function h(a,b){return"1"===b?a:u(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(h(a.toString())):a}function j(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function D(a,b,d){var k=g.async.deferred();g.ajax({url:a,async:b,cache:d,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=
C(arguments);a.push(this.url);k.notifyWith(k,a);k.resolveWith(k,a)}).fail(function(){k.rejectWith(k,C(arguments))});return k.promise()}function l(a){u(a)||m(n,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,k=0;k<b;k++)ya(a[k])||m(n,"h5.u.obj.ns()");for(var f=window,k=0;k<b;k++){var c=a[k];typeof f[c]===d&&(f[c]={});f=f[c]}return f}function q(a,d){var k=l(a),f;for(f in d)d.hasOwnProperty(f)&&(void 0!==k[f]&&m(b,[a,f]),k[f]=d[f])}function y(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function C(a){return Array.prototype.slice.call(a)}
function B(a,b){u(a)||m(n,"h5.u.obj.getByPath()");var a=a.replace(/\[(\d+)\]/g,function(a,b,d){return d?"."+b:b}),d=a.split("."),k=0;if("window"===d[0]&&(!b||b===window))k=1;for(var f=b||window,c=d.length;k<c&&!(f=f[d[k]],null==f);k++);return f}var d="undefined",n=11E3,b=11001,o=11004,w=11005,f=11006,k={},v={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},A=void 0!==document.createElement("script").onload,H=-1===/\r\n/.toString().indexOf("\r\n");q("h5.u",{loadScript:function(b,d){var f=
g.async.deferred,c=K(b);(!c||0===c.length)&&m(11007);for(var e=0,o=c.length;e<o;e++)b=c[e],(!u(b)||!a.trim(b))&&m(11007);null!=d&&!a.isPlainObject(d)&&m(11008,"h5.u.loadScript()");var w=d&&!1===d.async?!1:!0,n=!!(d&&!0===d.force),e=!!(d&&!0===d.parallel),h=!!(d&&!0===d.atomic),j=!n,v=w?f():null,l=w?function(a){v.reject(ea(11010,[a]))}:null,o=w?function(){var a=f();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,q=e?[]:null,y=[],H={};if(w){if(!h&&A){var B=a("head"),G=function(a){var b=
f(),d=document.createElement("script");d.onload=function(){d.onload=null;k[a]=a;b.resolve()};d.onerror=function(){d.onerror=null;b.reject(a)};d.type="text/javascript";d.src=j?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;B[0].appendChild(d);return b.promise()};if(e)q.push(o()),a.each(c,function(){var a=R(this.toString());if(!n&&a in k)return!0;q.push(G(a))}),fa(q,function(){v.resolve()},l);else{var L=ga(f().resolve(),o);a.each(c,function(){var a=R(this.toString());L=ga(L,function(){if(n||!(a in k))return G(a)},
l)});ga(L,function(){v.resolve()},l)}}else if(e){var T=[];q.push(o());T.push(null);a.each(c,function(){var a=R(this.toString());if(!n&&(a in k||a in H))return!0;q.push(D(a,w,j));h?H[a]=a:T.push(null)});e=c=null;h?(c=function(){a.each(C(arguments),function(b,d){a.globalEval(d[0])});a.extend(k,H);v.resolve()},e=a.noop):(c=function(){v.resolve()},e=function(){for(var b=C(arguments),d=0;d<T.length;d++)if(b[d]){var k=b[d][3];T[d]!==k&&(a.globalEval(b[d][0]),T.splice(d,1,k))}});g.async.when(q).done(c).fail(l).progress(e)}else L=
ga(f().resolve(),o),a.each(c,function(){var b=R(this.toString());L=ga(L,function(){var d=f();!n&&(b in k||b in H)?d.resolve():D(b,w,j).done(function(f){h?(y.push(f),H[b]=b):(a.globalEval(f),k[b]=b);d.resolve()}).fail(function(){d.reject(this.url)});return d.promise()},l)}),ga(L,function(){h&&(a.each(y,function(b,d){a.globalEval(d)}),a.extend(k,H));v.resolve()},l);return v.promise()}a.each(c,function(){var b=R(this.toString());if(!n&&(b in k||b in H))return!0;D(b,w,j).done(function(d){h?(y.push(d),
H[b]=b):(a.globalEval(d),k[b]=b)}).fail(function(){m(11010,[b])})});h&&(a.each(y,function(b,d){a.globalEval(d)}),a.extend(k,H))},createInterceptor:function(a,b){return function(d){var k={},f=a?a.call(this,d,k):d.proceed();d.result=f;if(!b)return f;if(f&&F(f.promise)&&!y(f)){var c=this;ta(f,"always",function(){b.call(c,d,k)});return f}b.call(this,d,k);return f}}});q("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===
d},format:function(a,b){if(null==a)return"";var k=C(arguments).slice(1);return a.replace(/\{(.+?)\}/g,function(a,b){if(/^\d+$/.test(b)){var f=k[parseInt(b,10)];return typeof f===d?d:f}f=/^\d+[\.|\[]/.test(b)?b:"0."+b;f=B(f,k);return typeof f===d?d:f})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return v[a]})}});q("h5.u.obj",{expose:q,ns:l,serialize:function(b){function k(a){for(var b=0,d=n.length;b<d;b++)if(a===n[b])return!0;return!1}function f(a){for(var b=
0,d=n.length;b<d;b++)a===n[b]&&n.splice(b,1)}function o(b){var h=b,g=a.type(b);"object"===typeof b&&(b instanceof String?g="String":b instanceof Number?g="Number":b instanceof Boolean&&(g="Boolean"));switch(g){case "String":case "string":h=c(g)+e(h);break;case "Boolean":h=h.valueOf();case "boolean":h=c(g)+(h?1:0);break;case "Number":h=h.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))h=Infinity===b.valueOf()?c("infinity"):-Infinity===b.valueOf()?c("-infinity"):c("nan");h=c(g)+h;break;
case "number":h=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?c("infinity"):-Infinity===b?c("-infinity"):c("nan"):c(g)+h;break;case "regexp":h=c(g)+e(h.toString(),H);break;case "date":h=c(g)+ +h;break;case "array":k(b)&&m(ERR_CODE_REFERENCE_CYCLE);n.push(b);for(var v=[],h=c(g)+"[",g=0,l=b.length;g<l;g++){v[g.toString()]=!0;var q;q=b.hasOwnProperty(g)?"function"===a.type(b[g])?c(d):j(o(b[g])):c("undefElem");h+='"'+q+'"';g!==b.length-1&&(h+=",")}var g="",A;for(A in b)v[A]||"function"!==
a.type(b[A])&&(g+='"'+j(e(A))+'":"'+j(o(b[A]))+'",');g&&(h+=(b.length?",":"")+'"'+c("objElem")+"{"+j(g),h=h.replace(/,$/,""),h+='}"');h+="]";f(b);break;case "object":k(b)&&m(w);n.push(b);h=c(g)+"{";for(A in b)b.hasOwnProperty(A)&&"function"!==a.type(b[A])&&(h+='"'+j(e(A))+'":"'+j(o(b[A]))+'",');h=h.replace(/,$/,"");h+="}";f(b);break;case "null":case d:h=c(g)}return h}F(b)&&m(11002);var n=[];return"2|"+o(b)},deserialize:function(b){function k(b){function n(a){switch(a){case "s":return"string";case "n":return"number";
case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return d;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;j=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(n(b)){case "String":j=new String(h(j,e));break;case "string":break;
case "Boolean":"0"===j||"1"===j?j=new Boolean("1"===j):m(f);break;case "boolean":"0"===j||"1"===j?j="1"===j:m(f);break;case "nan":""!==j&&m(f);j=NaN;break;case "infinity":""!==j&&m(f);j=Infinity;break;case "-infinity":""!==j&&m(f);j=-Infinity;break;case "Number":"infinity"===n(j)?j=new Number(Infinity):"-infinity"===n(j)?j=new Number(-Infinity):"nan"===n(j)?j=new Number(NaN):(j=new Number(j),isNaN(j.valueOf())&&m(f));break;case "number":j=(new Number(j)).valueOf();isNaN(j)&&m(f);break;case "array":var g;
try{g=a.parseJSON(j)}catch(w){m(f)}E(g)||m(f);for(var j=[],v=0,l=g.length;v<l;v++)switch(n(g[v].substring(0,1))){case "undefElem":j[v]=void 0;delete j[v];break;case "objElem":var b=k(c("object")+g[v].substring(1)),A;for(A in b)j[h(A)]=b[A];break;default:j[v]=k(g[v])}break;case "object":try{g=a.parseJSON(j)}catch(q){m(f)}a.isPlainObject(g)||m(f);j={};for(A in g)b=k(g[A]),j[h(A)]=b;break;case "date":j=new Date(parseInt(j,10));break;case "regexp":try{v=j.match(/^\/(.*)\/(.*)$/),l=h(v[1],e),j=RegExp(l,
v[2])}catch(H){m(f)}break;case "null":""!==j&&m(f);j=null;break;case d:""!==j&&m(f);j=void 0;break;default:m(o)}return h(j,e)}u(b)||m(11009);b.match(/^(.)\|(.*)/);var e=RegExp.$1;"1"!==e&&"2"!==e&&m(11003,[e,"2"]);return k(RegExp.$2)},isJQueryObject:y,argsToArray:C,getByPath:B})})();(function(){function c(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var e=!1;a.isDefaultPrevented=function(){return e};a.preventDefault=function(){e=true}}if(!a.isImmediatePropagationStopped){var h=
!1;a.isImmediatePropagationStopped=function(){return h};a.stopImmediatePropagation=function(){h=true}}}function e(a){var c={},e;for(e in a){var h=a[e];if(a.hasOwnProperty(e)&&(F(h)||null===h||"string"===typeof h||"number"===typeof h||"boolean"===typeof h))c[e]=h}this._mix=function(a){for(var e in c)a[e]=c[e]};this._hasInterface=function(a){for(var e in c)if(!g.u.str.startsWith(e,"_")&&typeof a[e]===ka)return!1;return!0}}function h(a){return new e(a)}a.extend(e.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});g.u.obj.expose("h5.mixin",{createMixin:h,eventDispatcher:h({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var e=this._eventListeners[a];if(!e||!this._eventListeners.hasOwnProperty(a))return!1;for(var h=0,g=e.length;h<g;h++)if(e[h]===c)return!0;return!1},addEventListener:function(a,c){(2>arguments.length||!u(a))&&m(16E3);null==c||this.hasEventListener(a,c)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(c))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var e=this._eventListeners[a],h=0,g=e.length;h<g;h++)if(e[h]===c){e.splice(h,1);break}},dispatchEvent:function(a){if(this._eventListeners){var e=this._eventListeners[a.type];if(e){e=e.slice(0);c(a,this);for(var h=0,g=e.length;h<g&&!a.isImmediatePropagationStopped();h++)F(e[h])?e[h].call(a.target,a):e[h].handleEvent&&e[h].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var c,e,h,j,D,l,q;function y(a){return a.match(/^error$/i)?c:a.match(/^warn$/i)?e:a.match(/^info$/i)?h:a.match(/^debug$/i)?j:a.match(/^trace$/i)?D:a.match(/^all$/i)?l:a.match(/^none$/i)?q:null}function C(a,b){var d={},k=a.slice(0,b),f=Math.min(H,b),c=k.slice(0,f).join(" <- ");k.length>f&&(c+=" ...");d.preview=c;d.all=k.join("\n");return d}function B(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function d(b){for(var b=g.u.obj.argsToArray(b),
d=[],k=0,f=b.length;k<f;k++)d.push(a.type(b[k]));return d.join(", ")}function n(){}function b(b){(!u(b)||0===a.trim(b).length)&&m(f);this.category=a.trim(b)}var o=10003,w=10004,f=10005,k=10007,v=10008,A=10010,H=3;c=50;e=40;h=30;j=20;D=10;l=0;q=-1;var z=null;n.prototype={init:function(){},log:function(a){window.console&&(u(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,d=null,d=1===b.length?b[0]:g.u.str.format.apply(g.u.str,b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&
(b+="  ["+a.stackTrace.preview+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==c&&console.error?(console.error(b),d=!0):a==e&&console.warn?(console.warn(b),d=!0):a==h&&console.info?(console.info(b),d=!0):a==j&&console.debug&&(console.debug(b),d=!0);!d&&console.log&&console.log(b)},
_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==c&&console.error?this._output(console.error,b):a.level==e&&console.warn?this._output(console.warn,b):a.level==h&&console.info?this._output(console.info,b):a.level==j&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,
b);return}}catch(d){}a(b)}};b.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(c,arguments,this.error)},warn:function(a){this._log(e,arguments,this.warn)},info:function(a){this._log(h,arguments,this.info)},debug:function(a){this._log(j,arguments,this.debug)},trace:function(a){this._log(D,arguments,this.trace)},_traceFunctionName:function(b){var k=[],f=Error();if(f=f.stack||f.stacktrace)var c=/_traceFunctionName/,k=f.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,
"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),e=null,h=null,k=a.map(k,function(b,d){if(0===b.length)return null==h?"":null;e=""===a.trim(b)?"{anonymous}":a.trim(b);null===h&&c.test(b)&&(h=d);return e}).slice(h+3);else for(var b=b.caller,f=0,o=this.maxStackSize;f<o;f++){var g=B(b),n=d(b.arguments),w;try{w=b.caller}catch(j){k.push("{unable to trace}");break}g?k.push("{"+g+"}("+n+")"):w?k.push("{anonymous}("+n+")"):k.push("{root}("+n+")");if(!w)break;b=w}return C(k,this.maxStackSize)},
_log:function(a,b,d){var b={level:a,args:g.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},k=z.out,f=z.defaultOut,d=[],c=!1;if(k)for(var k=K(k),e=0,h=k.length;e<h;e++){var o=k[e];if(o.compiledCategory.test(this.category)&&a>=o.compiledLevel&&0<=o.compiledLevel&&(d.push(o),!1!==o.terminate)){c=!0;break}}(!d.length||!c)&&d.push(f);e=0;for(k=d.length;e<k;e++){f=d[e];h=f.compiledLevel;f=f.compiledTargets;if(a<h||0>h)break;b.logger=this;b.date=new Date;b.levelString=
this._levelToString(a);if(!f||0===f.length)break;c=0;for(h=f.length;c<h;c++)f[c].log(b)}},_levelToString:function(a){if(a===c)return"ERROR";if(a===e)return"WARN";if(a===h)return"INFO";if(a===j)return"DEBUG";if(a===D)return"TRACE"}};g.u.obj.expose("h5.log",{createLogger:function(a){return new b(a)},configure:function(){function b(f,h,g){if(!g){var n=h.category;(!u(n)||0===a.trim(n).length)&&m(A);n=a.trim(n);h.compiledCategory=Ia(n);e.push(n)}g=null==h.level?y(g?d.level:c.level):u(h.level)?y(a.trim(h.level)):
h.level;"number"!==typeof g&&m(o,h.level);h.compiledLevel=g;g=[];n=h.targets;if(null!=n){var j=[];null==n||E(n)||u(n)&&a.trim(n).length||m(v);for(var n=K(n),l=0,G=n.length;l<G;l++){null==n[l]||u(n[l])&&a.trim(n[l]).length||m(v);var q=n[l];if(q){-1!==a.inArray(q,j)&&m(k,q);var H=f[q];H||m(w,q);j.push(q);g.push(H.compiledTarget)}}}h.compiledTargets=g}var d={level:"NONE",targets:null},f=a.extend(!0,{},g.settings.log),c=f.defaultOut;c||(c=d,f.defaultOut=c);var e=[],h=f.target;h||(h={},f.target=h);(function(b){a.isPlainObject(b)||
m(10009);for(var d in b){var f=b[d];a.type(f.type)!=="object"&&f.type!=="console"&&m(1E4);var k=null,k=f.type==="console"?new n:a.extend(true,{},f.type);k.init&&k.init(f);f.compiledTarget=k}b.console={type:"console",compiledTarget:new n}})(h);b(h,c,!0);var j=f.out;if(j)for(var j=K(j),l=0,q=j.length;l<q;l++)b(h,j[l]);z=f}})})();(function(){function c(c){g.settings.aspects=a.map(K(c),function(a){a.target&&(a.compiledTarget=Ia(a.target));a.pointCut&&(a.compiledPointCut=Ia(a.pointCut));return a})}g.u.obj.ns("h5.settings");
g.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===wb))return!1}},trackstartTouchAction:"none",res:{baseUrl:null,resolveTimeout:1E4},scene:{followTitle:!0,clientQueryStringPrefix:"",clientFWQueryStringPrefix:"_h5_",urlHistoryMode:"history",urlMaxLength:1800,baseUrl:null,autoInit:!1}};var e=g.u.createInterceptor(function(a,
c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var e=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,e)});g.u.obj.expose("h5.core.interceptor",{lapInterceptor:e,logInterceptor:e,errorInterceptor:function(a){var c=null;try{c=a.proceed()}catch(e){g.settings.commonFailHandler&&F(g.settings.commonFailHandler)&&g.settings.commonFailHandler.call(null,e)}return c}});
a(document).trigger("h5preinit");g.settings.aspects&&c(g.settings.aspects);g.log.configure()})();(function(){g.u.obj.expose("h5.env",{ua:function(c){function e(a,b){var d=u(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function h(a,b){var d=u(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function g(a,b){var d=u(a,"[^;) ]*",b).split(":");return 1===d.length?"":d[d.length-1]}var m=!!c.match(/iPhone/i),l=!!c.match(/iPad/i),q=m||l,y=!!c.match(/android/i),C=!!c.match(/Windows Phone/i),
B=!!c.match(/Edge/),d=!!c.match(/MSIE/)||!!c.match(/Trident/),n=!!c.match(/Firefox/i),b=!B&&!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),o=!B&&!y&&!b&&!!c.match(/Safari/i),w=!B&&!!c.match(/Webkit/i),f=!!c.match(/Opera/i),k=y&&!!c.match(/Safari/i)&&!b,v=!(!m&&!C&&!(k&&c.match(/Mobile/)&&!c.match(/SC-01C/)||y&&b&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),A=!(!l&&!(k&&!c.match(/Mobile/)||y&&b&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),
H=!v&&!A,z=null,I=null,$=function(b,d){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(d))).split("_")},u=function(b,d,f){return a.trim(c.match(!1===f?RegExp(b+d):RegExp(b+d,"i")))};if(m)I=$("iPhone OS","like"),z=parseInt(I[0]),I=I.join(".");else if(l)I=$("CPU OS","like"),z=parseInt(I[0]),I=I.join(".");else if(!y||!n)y?(I=e("Android"),z=parseInt(I.split(".")[0])):C&&((I=e("Windows Phone OS"))||(I=e("Windows Phone")),z=parseInt(I.split(".")[0]));d&&f&&(d=!1);var Ca=$=null;if(q||y&&k)$=z,
Ca=I;else{var N=null;d?N=e("MSIE",!1)||g("rv"):b?(N=h("Chrome",!1))||(N=h("CrMo",!1)):o?N=h("Version"):n?N=h("Firefox"):f?((N=h("Version"))||(N=h("Opera")),N||(N=e("Opera"))):B&&(N=h("Edge"));N&&($=parseInt(N.split(".")[0]),Ca=N)}return{osVersion:z,osVersionFull:I,browserVersion:$,browserVersionFull:Ca,isiPhone:m,isiPad:l,isiOS:q,isAndroid:y,isWindowsPhone:C,isIE:d,isFirefox:n,isChrome:b,isSafari:o,isOpera:f,isEdge:B,isAndroidDefaultBrowser:k,isSmartPhone:v,isTablet:A,isDesktop:H,isWebkit:w}}(navigator.userAgent)})})();
(function(){function c(a){function c(){b=!0;e=this;h=q(arguments);if(xa(a)||Qa(a))return a;var k=q(arguments);if(0<f.length)for(var g=0,n=f.length;g<n;g++){var j=k;j!==arguments&&(j=K(j));F(f[g])&&f[g].apply(this,j)}return a}var b=!1,e=null,h=null,f=[];a.progress=function(){for(var k=q(arguments),c=0,g=k.length;c<g;c++){var n=k[c];if(E(n))a.progress.apply(this,n);else if(F(n))if(b){var j=h;j!==h&&(j=K(j));n.apply(e,j)}else f.push(n)}return this};a.notify=c;a.notifyWith=function(a,b){return!b?c.apply(a):
c.apply(a,b)}}function e(a){if(!a)return!1;for(var a=K(a),c=0,b=a.length;c<b;c++)if(F(a[c]))return!0;return!1}function h(d,n){function b(a){n?n[a]&&(d[a]=n[a]):(v[a]=d[a],d[a]=function(){return function(){if(!f){var b=q(arguments);if("then"===a||"pipe"===a)b=b[1];e(b)&&(f=!0)}return d._h5UnwrappedCall.call(this,a,q(arguments))}}(a),A[a]=d[a])}function o(a){return function(){var b=g.settings.commonFailHandler;!f&&b&&!k&&(d.fail.call(this,b),k=!0);return a.apply(this,arguments)}}if(d._h5UnwrappedCall)return d;
var w=!!d.progress;!w&&!B(d)?c(d):n&&(d.progress=n.progress);var f=!1,k=!1,v={},A={};d._h5UnwrappedCall=n?n._h5UnwrappedCall:function(b,f){f=K(f);a.extend(d,v);var k=d[b].apply(this,f);a.extend(d,A);return k};for(var m=0,z=j.length;m<z;m++){var C=j[m];d[C]&&b(C)}d.pipe&&!n&&(d.pipe=function(){for(var a=g.async.deferred(),b=q(arguments),d=0,f=D.length;d<f;d++){var k=this;(function(b,d,f){function c(){if(e){var d=b.apply(this,arguments);if(d&&F(d.promise)){h(d);d.done(a.resolve);d._h5UnwrappedCall("fail",
a.reject);F(d.progress)&&d.progress(a.notify)}else a[f+"With"](this,[d])}else a[f+"With"](this,arguments)}var e=F(b);if(!e&&d==="fail")k._h5UnwrappedCall(d,c);else k[d](c)})(b[d],D[d],l[d])}return a.promise()},A.pipe=d.pipe);if(d.then&&!n){var u=d.then;d.then=y?d.pipe:function(){var a=arguments,b=u.apply(this,a);!w&&e(a[2])&&d.progress.call(d,a[2]);return b};A.then=d.then}d.reject&&(d.reject=n&&n.reject?n.reject:o(d.reject));d.rejectWith&&(d.rejectWith=n&&n.rejectWith?n.rejectWith:o(d.rejectWith));
if(d.promise)if(n&&n.promise)d.promise=n.promise;else{var ha=d.promise;d.promise=function(){return h(ha.apply(this,arguments),d)}}return d}var j=["fail","always","pipe","then"],D=["done","fail","progress"],l=["resolve","reject","notify"],q=g.u.obj.argsToArray,y=function(){var d=a.Deferred();return d!==d.then()}(),C=function(){var d=a.Deferred();return h(d)},B=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};g.u.obj.expose("h5.async",{deferred:C,when:function(){var d=q(arguments);1===
d.length&&E(d[0])&&(d=d[0]);var c=d.length,b=g.async.deferred(),e=b.promise(),h=a.when.apply(a,d).done(function(){b.resolveWith(this&&this.promise&&this.promise()===h?b:this,q(arguments))}).fail(function(){b.rejectWith(this,q(arguments))});if(h.progress)h.progress(function(){b.notifyWith(this===h?e:this,q(arguments))});else{for(var f=[],k=0;k<c;k++)f[k]=void 0;for(var j=function(a){return function(d){f[a]=1<arguments.length?q(arguments):d;b.notifyWith(e,f)}},k=0;k<c;k++){var l=d[k];l&&F(l.promise)&&
l.progress&&(1<c?l.progress(j(k)):l.progress(function(){b.notifyWith(e,q(arguments))}))}}return e},isPromise:B,loop:function(d,c,b){E(d)||m(5E3);var e=C(),h="number"===a.type(b)?b:20,f=0,k=d.length,g,j=null,l=function(){if(f===k)e.resolve(d);else{var a=c.call(d,f,d[f],j);f++;B(a)?a.done(function(){g()}).fail(function(){e.reject(d)}):g()}},q=function(){setTimeout(function(){var a=f-1;0<f&&e.notify({data:d,index:a,value:d[a]});l()},0)},y=!1;g=function(){y||(0===f%h?q():l())};var D=!1,j={resume:function(){!D&&
y&&(y=!1,g())},pause:function(){y=!0},stop:function(){D=!0;e.resolve(d)}};q();return e.promise()}})})();(function(){function c(a,c){for(var e=0,h=m.length;e<h;e++){var d=m[e];a[d]&&(c[l[d]](a[d]),a[d]=void 0)}}function e(c,e,h){for(var g in e)if(e.hasOwnProperty(g)&&(h||!F(e[g]))&&-1===a.inArray(g,j))c[g]=e[g]}function h(a,c){e(this,a,!0);c.promise(this);var h=this.always;this.always=function(){h.apply(this,arguments);return this}}var j=["error","success","complete"],m=["error","success","complete"],
l={success:"done",error:"fail",complete:"always"};g.u.obj.expose("h5",{ajax:function(){function j(a,c,h){e(n,h);d.resolveWith(this,arguments)}function l(b,c,h){if(0===m.retryCount||!1===m.retryFilter.apply(this,arguments))e(n,b),d.rejectWith(this,arguments);else if(m.retryCount--,this.async){var f=this;setTimeout(function(){a.ajax(f).done(j).fail(l)},m.retryInterval)}else a.ajax(this).done(j).fail(l)}var m={},D=arguments;u(D[0])?(a.extend(m,D[1]),m.url=D[0]):a.extend(m,D[0]);var m=a.extend({},g.settings.ajax,
m),d=g.async.deferred();c(m,d);var D=a.ajax(m),n=new h(D,d);D.done(j).fail(l);return n}})})();(function(){function c(a,c){this.id=a;this.content=c}function e(a,c,b){this.url=a;this.path=c;this.content=b}function h(a){this._resourceKey=a}function j(a){function c(a,b){if(0!==b.indexOf("../"))return a+b;b=b.slice(3);a=a.replace(/[^\/]+?\/$/,"");return c(a,b)}var b=g.settings.res.baseUrl;if(a===R(a)||0===a.indexOf("/"))return a;if(!b)return 0===a.indexOf("./")?a:"./"+a;g.u.str.endsWith(b,"/")||(b+="/");
return c(b,a)}function m(a,c,b){void 0===b&&F(a)&&(b=a,a=void 0);q.unshift({type:a,test:c,resolver:b})}var l=g.async.deferred,q=[],y={};waitingInfoMap={};waitingForImmediateDeferred=[];waitingImmediateTimer=null;var C={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var c=a.url;this.cache[c]=a;this.cacheUrls.push(c)},clearCache:function(a,c){var b=R(a);c||delete this.cache[b];for(var e=0,h=this.cacheUrls.length;e<
h;e++)if(this.cacheUrls[e]===b){this.cacheUrls.splice(e,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var c=this.cache[a];this.clearCache(a,!0);this.cacheUrls.push(a);return c},loadResourceFromPath:function(a){var c=R(a);if(this.accessingUrls[c])return this.accessingUrls[c];var b=l(),h=b.promise();this.accessingUrls[c]=h;var j=this;g.ajax(a,{dataType:"text"}).done(function(f,k,h){delete j.accessingUrls[c];f=new e(c,a,h.responseText);j.append(f);
b.resolve(f)}).fail(function(f){delete j.accessingUrls[c];b.reject(ea(17E3,[f.status,c],{url:c,path:a,error:f}))});return h}},B={load:function(a){var c=R(a);return C.cache[c]?l().resolve(C.getResourceFromCache(c)).promise():C.loadResourceFromPath(a)},clearCache:function(a){C.clearCache(a)},clearAllCache:function(){C.clearAllCache()}};a.extend(h.prototype,{resolve:function(d){function c(b){for(var f=0,k=q.length;f<k;f++)if(!(d&&d!==q[f].type)){var e=q[f].test;if(!d&&e)if("regexp"===a.type(e)){if(!e.test(b))continue}else if(!1===
e(b))continue;return q[f].resolver(b,d)}return!1}if(!E(this._resourceKey))return c(this._resourceKey);for(var b=this._resourceKey,e=[],h=0,f=b.length;h<f;h++){var k=c(b[h]);e.push(k)}var j=g.async.deferred();fa(e,function(a){E(a)||(a=[a]);a.unshift(a.slice(0));j.resolveWith(j,a)},function(a){j.reject(a)});return j.promise()},getKey:function(){return this._resourceKey}});m("namespace",null,function(a){var c=y[a]||g.u.obj.getByPath(a);if(c)return l().resolve(c).promise();if(waitingInfoMap[a])return waitingInfoMap[a].deferred.promise();
var c=j(a.replace(/\./g,"/"))+".js",b=l(),e=g.settings.res.resolveTimeout,h=null;0<e&&(h=setTimeout(function(){waitingInfoMap[a]&&(delete waitingInfoMap[a],b.reject(ea(17001,[a])))},e));waitingInfoMap[a]={deferred:b,timer:h};g.u.loadScript(c).done(function(){var c=y[a]||g.u.obj.getByPath(a);c&&waitingInfoMap[a]&&(y[a]=c,delete waitingInfoMap[a],clearTimeout(h),b.resolve(c))}).fail(function(c){clearTimeout(h);delete waitingInfoMap[a];b.reject(c)});return b.promise()});m("ejsfile",/.*\.ejs(\?.*$|$)/,
function(d){var e=l();B.load(j(d)).done(function(b){var d=a(b.content).filter(function(){return 1===this.nodeType&&0!==this.tagName.indexOf("/")}),h=[];0<d.not('script[type="text/ejs"]').length?e.reject(ea(7011,null,{url:b.url,path:b.path})):(0===d.length&&e.reject(ea(7001,null,{url:b.url,path:b.path})),d.each(function(){var d=a.trim(this.id);d||e.reject(ea(7002,null,{url:b.url,path:b.path}));var k=a.trim(this.innerHTML);h.push(new c(d,k))}),e.resolve({url:b.url,path:b.path,templates:h}))}).fail(function(a){var d=
a.detail,d=ea(7003,[d.error.status,d.url],d);a.code=d.code;a.message=d.message;a.detail=a.detail;e.reject(a)});return e.promise()});m("jsfile",/.*\.js(\?.*$|$)/,function(a){return g.u.loadScript(j(a))});m("cssfile",/.*\.css(\?.*$|$)/,function(a){var c=document.getElementsByTagName("head")[0],b=document.createElement("link");b.type="text/css";b.rel="stylesheet";b.href=j(a);c.appendChild(b);return l().resolve(b).promise()});g.u.obj.expose("h5.res",{dependsOn:function(a){return new h(a)},isDependency:function(a){return a instanceof
h},register:function(a,c,b,e){b&&(e?g.u.obj.expose(e,c):g.u.obj.expose(a,c));y[a]=c;if(b=waitingInfoMap[a])delete waitingInfoMap[a],a=b.deferred,(b=b.timer)&&clearTimeout(b),waitingForImmediateDeferred.push({dfd:a,value:c}),waitingImmediateTimer||(waitingImmediateTimer=setTimeout(function(){waitingImmediateTimer=null;for(var a=waitingForImmediateDeferred.splice(0,waitingForImmediateDeferred.length),b=0,d=a.length;b<d;b++)a[b].dfd.resolve(a[b].value)},0))},get:function(a){return g.res.dependsOn(a).resolve()}})})();
(function(){function c(a){null!=a.style.transform&&(a.style.transform="");null!=a.style.mozTansform&&(a.style.mozTansform="");null!=a.style.webkitTansform&&(a.style.webkitTansform="")}function e(a,b,d,c){if(!ab){ab={};var a=new Sa(null,"a"),f;for(f in a)a.hasOwnProperty(f)&&"__name"!==f&&"__templates"!==f&&"__meta"!==f&&(ab[f]=1);a=Sa.prototype;for(f in a)a.hasOwnProperty(f)&&(ab[f]=null)}for(var e in d)e in ab&&m(Bb,[c,e],{controllerDefObj:d})}function h(b,d){function c(f,e){-1!==a.inArray(f,e)&&
m(Cb,[d],{controllerDefObj:b});n(f,function(a){c(a,e.concat([f]))},!0)}c(b,[])}function j(Da){function d(c,f){-1!==a.inArray(c,f)&&m(Db,[Da.__name],{logicDefObj:Da});b(c,function(a){d(a,f.concat(c))})}d(Da,[])}function D(b,d,c){null==b&&m(r,[c],{controllerDefObj:d});!u(b)&&"object"!==typeof b&&m(xb,[c],{controllerDefObj:d});b=a(b);0===b.length&&m(ua,[c],{controllerDefObj:d});1<b.length&&m(za,[c],{controllerDefObj:d});b[0].nodeType!==lb&&b[0].nodeType!==ba&&m(Eb,[c],{controllerDefObj:d})}function l(a,
b,d,c,f){this.controller=a;this.event=b;this.evArg=d;this.selector=c;this.selectorType=f}function q(a){if(!s(this)&&this.__controllerContext.executeListeners)return a.proceed()}function y(a,b,d){var c=C(a.__name,b);d&&c.push(q);return B(a[b],b,c)}function C(a,b){var d=[],c=g.settings.aspects;if(!c||0===c.length)return d;for(var c=K(c),f=c.length-1;-1<f;f--){var e=c[f];if(!e.target||e.compiledTarget.test(a)){var k=e.interceptors;if(!e.pointCut||e.compiledPointCut.test(b))if(E(k))for(e=k.length-1;-1<
e;e--)d=d.concat(k[e]);else d.push(k)}}return d}function B(a,b,d){for(var c=function(a,b,d){return function(){var Da=this;return d.call(Da,{target:Da,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(Da,this.args)}})}},f=0,e=d.length;f<e;f++)a=c(a,b,d[f]);return a}function d(a,b,d){if(d&&a===mb)return d.rootElement;for(var c=["window","document","navigator"],f=0,e=c.length;f<e;f++){var k=c[f];if(a===k||Aa(a,k+"."))return g.u.obj.getByPath(a,V(b))}return d&&Aa(a,"this.")?g.u.obj.getByPath(a.slice(5),
d):a}function n(a,b,d){if(d){var c=Ea.get(a.__name);if(c){d=0;for(e=c.childControllerProperties.length;d<e;d++){var f=c.childControllerProperties[d];if((k=a[f])&&!1===b(a[f],a,f))return!1}}else for(f in a){var c=a,e=f,k=d,r=c[e];if(bb(e,La)&&"rootController"!==e&&"parentController"!==e&&r&&(k||r.__controllerContext&&!r.__controllerContext.isRoot&&(!r.parentController||r.parentController===c))&&!1===b(a[f],a,f))return!1}}else if(!s(a))for(var f=a.__controllerContext.childControllers,d=0,e=f.length;d<
e;d++){var k=f[d];if(!1===b(k,a))return!1}}function b(a,b){var d=Ea.get(a.__name);if(d)for(var c=0,f=d.logicProperties.length;c<f;c++){var e=d.logicProperties[c];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&bb(e,p)&&!1===b(a[e],a,e))return!1}function o(a,b,d,c){return!1===b.call(this,a,d,c)?!1:n(a,function(a,d,c){if(o(a,b,d,c)===false)return false})}function w(a,b,d,c){if(!1===n(a,function(a,d,c){if(!a||!1===w(a,b,d,c))return!1})||!1===b.call(this,a,d,c))return!1}function f(a,
b){var d=[];n(a,function(a){(a=a[b])&&d.push(a)});return d}function k(a){var b=a.__controllerContext.cache.bindMap,d=O(a.rootElement),c;for(c in b)for(var f=v(a,b[c],a[c]),e=0,k=f.length;e<k;e++)A(f[e],d)}function v(b,d,c){function f(b){var d=b.handler,c=b.controller;b.originalHandler||(b.originalHandler=d);b.handler=function(){var Da=!b.isNativeBind&&g.settings.listenerElementType===1?a(this):this;d.call(c,G(b,arguments),Da)}}var e=d.selector,k=d.eventName,r=d.bindTarget,h=d.isGlobal,p=d.isBindRequested;
switch(k){case "mousewheel":c=Ra(b,k,c);break;case x:case t:case ma:var c=J(b,k,c),j=b.__controllerContext,k=!1;j.h5trackEventHandlerInfos=j.h5trackEventHandlerInfos||[];for(var o=j.h5trackEventHandlerInfos,j=0,s=o.length;j<s;j++){var n=o[j];if(r){if(na(r,n.bindTarget)){k=!0;break}}else if(e===n.selector&&h===n.isGlobal&&p===n.isBindRequested){k=!0;break}}k||(c=Ab(b).concat(c),o.push(d));break;default:c=P(b,k,c)}E(c)||(c=[c]);j=0;for(s=c.length;j<s;j++)d=c[j],f(d),d.isBindRequested=p,d.isGlobal=h,
d.bindTarget=r,d.selector=e,d.controller=b;return c}function A(b,c){var f=b.controller,e=f.rootElement,k=b.selector,r=b.eventName,h=b.handler,p=b.isBindRequested,j=b.isGlobal;b.bindTarget?(b.evSelectorType=pa.SELECTOR_TYPE_OBJECT,R(b)):j?(f=d(k,c,f),p||!u(f)?(b.evSelectorType=pa.SELECTOR_TYPE_OBJECT,b.bindTarget=u(f)?a(f):f,R(b)):(b.evSelectorType=pa.SELECTOR_TYPE_GLOBAL,a(c).delegate(f,r,h)),b.evSelector=f):(b.evSelectorType=pa.SELECTOR_TYPE_LOCAL,b.evSelector=k,p?(b.bindTarget=a(k,e),R(b)):a(e).delegate(k,
r,h));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),Ia&&r===x&&null!=g.settings.trackstartTouchAction&&(j?a(b.evSelector,c):a(b.evSelector,e)).each(function(){this.style[Ba]=g.settings.trackstartTouchAction}))}function H(b,d,c){var f=b.controller,e=f.rootElement,k=b.selector,r=b.handler,h=b.eventName,p=b.isGlobal;if(b.bindTarget)d=b.bindTarget,e=b.eventName,k=b.handler,b.isNativeBind?d.removeEventListener(e,k):a(d).unbind(e,k);else if(p){if(null==V(d))return;a(d).undelegate(k,
h,r)}else a(e).undelegate(k,h,r);c||(c=f.__controllerContext.boundHandlers,c.splice(a.inArray(b,c),1))}function z(a,b){o(a,function(a){a.__controllerContext.executeListeners=b})}function I(a,b,d){return function(){var c=null,f=a[b],e=a.__name,k=!1,k="__init"===b?a.isInit:"__postInit"===b?a.isPostInit:a.isReady;if(!k&&f)try{c=a[b]({args:a.__controllerContext.args})}catch(r){da(a,r)}c&&F(c.done)&&F(c.fail)?c.done(d).fail(function(){var b=ea(Fb,e,Ta(arguments));da(a.rootController,null,b)}):d()}}function $(a,
b){qa(a)||o(a,function(d){var c,f;"__init"===b?(c=N(d),f=[d.preInitPromise],d.parentController&&f.push(d.parentController.initPromise)):"__postInit"===b?(c=U(d),f=ha(d)):(c=Ya(d),f=Ca(d));var e=a.__controllerContext;e.waitingPromisesManagerMap=e.waitingPromsiesManager||{};e.waitingPromisesManagerMap[b]=fa(f,I(d,b,c))})}function ha(a){var b=f(a,"postInitPromise");b.push(a.initPromise);return b}function Ca(a){var b=f(a,"readyPromise");b.push(a.postInitPromise);return b}function N(b){return function(){function d(){var a=
!0;o(b.rootController,function(b){return a=b.isInit});return a}if(!X(b))if(b.isInit)d()&&$a(b.rootController);else{b.isInit=!0;var c=b.__controllerContext.initDfd;delete b.__controllerContext.templatePromise;delete b.__controllerContext.preInitDfd;delete b.__controllerContext.initDfd;var f=b.rootElement;try{var e=b.__meta,k=b.__controllerContext.childControllers,r;for(r in e)-1!==a.inArray(b[r],k)&&(b[r].__controllerContext.metaRootElement=e[r]&&e[r].rootElement);n(b,function(a){var d=a.__controllerContext.metaRootElement;
delete a.__controllerContext.metaRootElement;a.rootElement||(d=d?T(d,a,b):f,D(d,a.__controllerContext.controllerDef,a.__name),a.rootElement=d,a.view.__controller=a)})}catch(h){da(b,h);return}e=d();c.resolveWith(b);!X(b)&&e&&$a(b.rootController)}}}function U(b){return function(){if(!X(b)){b.isPostInit=!0;var d=b.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__postInit=fa(ha(b),function(){if(!X(b)){var c=d.postInitDfd;if(c&&(delete d.postInitDfd,
c.resolveWith(b),!X(b)&&!d.isExecutedBind))if(d.isRoot){var c=b.__meta,f=d.childControllers,e;for(e in c)-1!==a.inArray(b[e],f)&&(b[e].__controllerContext.metaUseHandlers=c[e]&&c[e].useHandlers);o(b,function(a){var b=a.__controllerContext.metaUseHandlers;delete a.__controllerContext.metaUseHandlers;a.__controllerContext.isExecutedBind||(a.__controllerContext.isExecutedBind=!0,!1!==b&&k(a))});if(!1!==d.managed&&(a(b.rootElement).trigger("h5controllerbound",b),X(b)))return;M(b)}else b.rootController.isPostInit&&
((!b.parentController.__meta||!1!==b.parentController.__meta.userHandlers)&&k(b),M(b.rootController))}})}}}function Ya(b){return function(){if(!X(b)){b.isReady=!0;var d=b.__controllerContext;d.waitingPromsiesManager=d.waitingPromsiesManager||{};d.waitingPromsiesManager.__ready=fa(Ca(b),function(){if(!X(b)){var c=d.readyDfd;c&&(delete d.readyDfd,c.resolveWith(b),!X(b)&&d.isRoot&&a(b.rootElement).trigger("h5controllerready",b))}})}}}function ca(b,c){if(!u(b))return a(b);var f=a.trim(b);return fb.test(f)?
(f=a.trim(f.substring(1,f.length-1)),a(d(f,O(c.rootElement),c))):a(c.rootElement).find(b)}function P(a,b,d){return{controller:a,eventName:b,handler:d}}function Ra(a,b,d){return{controller:a,eventName:typeof document.onmousewheel===ka?"DOMMouseScroll":b,handler:function(b){var c=b.event;null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.wheelDelta&&(c.wheelDelta=c.originalEvent.wheelDelta);null==c.wheelDelta&&c.originalEvent&&null!=c.originalEvent.detail&&(c.wheelDelta=40*-c.originalEvent.detail);
d.call(a,b)}}}function J(b,d,c){var f=null;if(d===x)return P(b,d,c);f=P(b,d,function(b){var d=b.event,f=d.h5DelegatingEvent;if(!f)return c.apply(this,arguments);f=f.type;if("mousemove"===f||"mouseup"===f)f=a(d.currentTarget).offset()||{left:0,top:0},d.offsetX=d.pageX-f.left,d.offsetY=d.pageY-f.top;c.apply(this,arguments)});f.originalHandler=c;return f}function Ab(b,d){function c(a,b){for(var d in a)a.hasOwnProperty(d)&&!b[d]&&"target"!==d&&"currentTarget"!==d&&"originalEvent"!==d&&"liveFired"!==d&&
(b[d]=a[d]);b.h5DelegatingEvent=a}function f(d,e,k){return function(g){var j;a:{switch(d){case "touchstart":case "mousedown":j=x;break a;case "touchmove":case "mousemove":j=t;break a;case "touchend":case "mouseup":j=ma;break a}j=void 0}var o=j===x;if(!o||!p){var s=0===g.event.type.indexOf("touch");s&&aa(g.event,d);var Ka=new a.Event(j);c(g.event,Ka);var n=g.event.target;e&&(n=e);k&&k(Ka);var w=g.event.originalEvent||g.event;o&&-1===a.inArray(w,Ma)&&(Ma=[],Ua=[]);var l=a.inArray(w,Ma);-1===l&&(l=Ma.push(w)-
1,Ua[l]=!1);if(!Ua[l]&&(!s||p||o))Ua[l]=!0,a(n).trigger(Ka,g.evArg),p=!0;if(g.event.currentTarget===document&&(j===ma&&(Ma=[],Ua=[]),-1!==a.inArray(w,Ma)))Ma.splice(l,1),Ua.splice(l,1);if(o&&p){Ka.isDefaultPrevented()||Ka.h5DelegatingEvent.preventDefault();j=Ka.target;var v=Ka.clientX,m=Ka.clientY,ua=s?"touchmove":"mousemove",G=s?"touchend":"mouseup",tb=f(ua,j,function(a){var b=a.clientX,d=a.clientY;a.dx=b-v;a.dy=d-m;v=b;m=d}),A=f(G,j),za=function(a){g.event=a;g.evArg=S(arguments);tb(g)},q=function(a){g.event=
a;g.evArg=S(arguments);A(g)},M=s?a(j):r;h=function(){Ma=[];Ua=[];M.unbind(ua,za);M.unbind(G,q);if(!s&&b.rootElement!==document){a(b.rootElement).unbind(ua,za);a(b.rootElement).unbind(G,q)}};M.bind(ua,za);M.bind(G,q);!s&&b.rootElement!==document&&(a(b.rootElement).bind(ua,za),a(b.rootElement).bind(G,q))}else j===ma&&(h(),p=!1)}}}function e(a){return{controller:b,selector:d,eventName:a,handler:f(a),isInnerBindObj:!0}}var k=typeof document.ontouchstart!==ka,r=a(O(b.rootElement)),h=null,p=!1,g=[e("mousedown")];
k&&g.push(e("touchstart"));return g}function ja(b){if("svg"!==b.tagName.toLowerCase()||Ja())return a(b).offset();var d=O(b).createElementNS(ra,"rect"),f=b.viewBox,e=f.baseVal.y;d.setAttribute("x",f.baseVal.x);d.setAttribute("y",e);d.setAttribute("width",1);d.setAttribute("height",1);c(d);b.appendChild(d);f=a(d).offset();b.removeChild(d);return f}function aa(a,b){var d=a.originalEvent;if(d){var c="touchend"===b||"touchcancel"===b?d.changedTouches[0]:d.touches[0],f=c.pageX,e=c.pageY;a.pageX=d.pageX=
f;a.pageY=d.pageY=e;a.screenX=d.screenX=c.screenX;a.screenY=d.screenY=c.screenY;a.clientX=d.clientX=c.clientX;a.clientY=d.clientY=c.clientY;c=a.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;c=ja(c);e-=c.top;a.offsetX=d.offsetX=f-c.left;a.offsetY=d.offsetY=e}}function S(a){return 3>a.length?a[1]:Ta(a).slice(1)}function G(a,b){var d=null,c=null;b&&(d=b[0],c=S(b));var f=d;if(f&&null==f.offsetX&&null==f.offsetY&&f.pageX&&f.pageY){var e=f.target;
if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;e=ja(e);f.offsetX=f.pageX-e.left;f.offsetY=f.pageY-e.top}return new l(a.controller,d,c,a.evSelector,a.evSelectorType)}function L(a){o(a,function(a){a.rootElement=null;a.view.__controller=null})}function T(b,d,c){null==b&&m(r,[d.__name]);!u(b)&&"object"!==typeof b&&m(xb,[d.__name]);b=c?ca(b,c):a(b);0===b.length&&m(ua,[d.__name]);1<b.length&&m(za,[d.__name]);return b.get(0)}function M(b){var d=b.__controllerContext.managed,
c=Na.controllers;-1===a.inArray(b,c)&&!1!==d&&c.push(b);b.__controllerContext.triggerReadyExecuted=!0;$(b,"__ready")}function W(a,b){!1===b?$(a,"__init"):setTimeout(function(){X(a)||!a.__controllerContext.isRoot&&a.rootController.readyDfd||$(a,"__init")},0)}function $a(a){a.__controllerContext.triggerPostInitExecuted=!0;$(a,"__postInit")}function nb(a,b){o(a,function(a){var d=va();d.resolve();var c=a.__controllerContext;c.templatePromise=d.promise();c.initDfd=va();c.postInitDfd=va();c.readyDfd=va();
c.isUnbinding=!1;c.isUnbinded=!1;c.isExecutedBind=!1;c.triggerPostInitExecuted=!1;c.triggerReadyExecuted=!1;c.args=b;a.initPromise=c.initDfd.promise();a.postInitPromise=c.postInitDfd.promise();a.readyPromise=c.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1})}function Fa(b,d){var c=null,f=d;a.isPlainObject(f)?c=f.target:f={};c=c?ca(c,b):b.rootElement;return g.ui.indicator.call(b,c,f)}function la(a,b){var d=[],c=null;w(a,function(a){if(a[b]&&F(a[b])){try{var f=a[b]()}catch(e){c=c||e}ya(f)&&
d.push(f)}});if(c)throw c;return d}function da(a,b,d){function c(){var a=b||d||h||j;w(e,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var d in b)b.hasOwnProperty(d)&&(b[d]=null)});j?g.rejectWith(e,[j]):g.resolveWith(e);if(a&&(Na.dispatchEvent({type:"lifecycleerror",detail:a,rootController:e}),b||h))throw b||h;}function f(){j=h||ea(Gb,e.__name,Ta(arguments));c()}var e=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);
if(e){if(!qa(e)){e.__controllerContext.isDisposing=1;try{Y(e,d||b)}catch(k){b=b||k}var r,h=null;try{r=la(e,"__dispose")}catch(p){b=b||p,h=h||p}var g=e.deferred(),j=null;h?f():fa(r,c,f,!0);return g.promise()}}else if(b)throw b;}function Y(b,d){if(!X(b)){b.__controllerContext.isUnbinding=1;ob(b,d);var c;try{la(b,"__unbind")}catch(f){c=f}o(b,function(a){var b=a.rootElement;if(b){for(var b=O(b),d=a.__controllerContext.boundHandlers,c=0,f=d.length;c<f;c++)H(d[c],b,!0);a.__controllerContext.boundHandlers=
[]}});b.__controllerContext.unbindList={};Na.controllers=a.grep(Na.controllers,function(a){return a!==b});b.isPostInit&&!1!==b.__controllerContext.managed&&a(b.rootElement).trigger("h5controllerunbound",b);L(b);b.__controllerContext.isUnbinded=1;if(c)throw c;}}function oa(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?oa(a,b.parentController):g.core.view}function s(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function qa(a){return s(a)||a.__controllerContext.isDisposing}
function X(a){a=a.__controllerContext&&a.__controllerContext.isRoot?a:a.rootController;return!a||s(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function ob(a,b){var d=["postInitDfd","readyDfd"],c=[];o(a,function(a){c.push(a);var d=a.__controllerContext.initDfd;d&&!xa(d)&&!Qa(d)&&d.rejectWith(a,[b])});for(var f=0,e=d.length;f<e;f++)for(var k=d[f],r=c.length-1;0<=r;r--){var h=c[r],p=h.__controllerContext[k];p&&!xa(p)&&!Qa(p)&&p.rejectWith(h,[b])}}function gb(a,b){for(var d=
a.childNodes,c=0,f=d.length;c<f;c++){var e=d[c];if(1===e.nodeType){if(e=gb(e,b))return e}else if(8===e.nodeType){var k=e.nodeValue;if(0===k.indexOf(hb)){var r=k.indexOf("}");if(-1!==r&&(k=k.slice(0,r).match(/id="([A-Za-z][\w-:\.]*)"/))&&k[1]===b)return e}}}return null}function cb(a){var b=this;return function(){return a.apply(b,arguments)}}function Ga(a){var b=this;return function(){var d=g.u.obj.argsToArray(arguments);d.unshift(this);return a.apply(b,d)}}function pb(a,b,d){function c(f){g.u.obj.getByPath("h5.core.view")||
m(Hb);d=E(d)?d:[d];for(var e=[],k=0,r=d.length;k<r;k++){var h=Za(d[k])?d[k]:g.res.dependsOn(d[k]);e.push(h.resolve("ejsfile"))}fa(e,function(d){for(var d=E(d)?d:[d],c=0,f=d.length;c<f;c++)for(var e=d[c].templates,k=0,r=e.length;k<r;k++)try{a.view.__view.register(e[k].id,e[k].content)}catch(h){b.reject(h)}b.resolve()},function(a){var d=a.detail.error.status;f===g.settings.dynamicLoading.retryCount||0!==d&&d!==wb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){c(++f)},g.settings.dynamicLoading.retryInterval)})}
c(0)}function wa(b,d,c,f){var e=u(b),k=e?null:b,b=e?a.trim(b):null,d=a.trim(d),r=!e||fb.test(b),h=qb.test(d);h&&(d=a.trim(a.trim(d.substring(1,d.length-1))));e&&r&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&m(Ib,[c.__name],{controllerDef:c}));return{selector:b,bindTarget:k,isGlobal:r,isBindRequested:h,eventName:d,propertyKey:f}}function Oa(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=
[]}function rb(b){var d=new Oa,c=d.logicProperties,f=d.eventHandlerProperties,e=d.functionProperties,k=d.otherProperties,r=d.bindMap,h=d.childControllerProperties,g={},j;for(j in b)if(-1!==j.indexOf(" ")&&F(b[j])){f.push(j);var o=a.trim(j),s=o.lastIndexOf(" "),o=wa(o.substring(0,s),o.substring(s+1,o.length),b,j),s=o.selector,x=o.eventName,n=o.isGlobal,l=o.isBindRequested;g[s]||(g[s]={});g[s][x]||(g[s][x]={});g[s][x][n]||(g[s][x][n]={});g[s][x][n][l]?m(Jb,[b.__name,s,x],{controllerDef:b}):g[s][x][n][l]=
1;r[j]=o}else bb(j,La)&&b[j]&&!F(b[j])?h.push(j):bb(j,p)&&b[j]&&!F(b[j])?c.push(j):F(b[j])?e.push(j):k.push(j);return d}function Va(){this.logicProperties=[];this.functionProperties=[]}function Wa(a){var b=new Va,d=b.functionProperties,c=b.logicProperties,f;for(f in a)a.hasOwnProperty(f)&&bb(f,p)?c.push(f):F(a[f])&&d.push(f);return b}function Kb(d,c){function f(b,d,c){d=d.__logicContext.waitingPromises=d.__logicContext.waitingPromises||[];-1===a.inArray(b,d)&&(d.push(b),b.done(c))}function e(r){function h(){if(!r.__logicContext.isCalledReady){var e=
!0;b(r,function(a){return e=a.__logicContext.isReady});if(e){var p=F(r.__ready)&&r.__ready();r.__logicContext.isCalledReady=!0;ya(p)?(k.push(p),p.done(function(){r.__logicContext.isReady=!0;k.splice(a.inArray(p,k),1);r.__logicContext.waitingPromises=null;r===d&&c.resolveWith(r)})):(r.__logicContext.isReady=!0,r.__logicContext.waitingPromises=null,r===d&&c.resolveWith(r))}else for(var g=0,j=k.length;g<j;g++)f(k[g],r,h)}}r.__logicContext.isReady=!1;r.__logicContext.isCalledReady=!1;b(r,e);h()}var k=
[];e(d)}function na(a,b){if(a===b)return!0;var d=sa(a),c=sa(b);if(!d&&!c)return!1;d=d?a.toArray():[a];c=c?b.toArray():[b];if(d.length!==c.length)return!1;for(var f=0,e=d.length;f<e;f++)if(d[f]!==c[f])return!1;return!0}function Z(a,b){(!a||!a.rootElement)&&m(Lb,b)}function Q(a,b){(!a||s(a))&&m(Mb,b)}function R(b){var d=b.bindTarget,c=b.eventName,f=b.handler;d&&typeof d.nodeType!==ka||ub(d)||sa(d)?a(d).bind(c,f):!d||!d.addEventListener?b.isBindCanceled=!0:(d.addEventListener(c,f),b.isNativeBind=!0)}
function ga(a,b){b.parentController=a;a.__controllerContext.childControllers.push(b);b.__controllerContext.isRoot=!1;if(a.__controllerContext.isExecutedConstruct){var d=a.rootController;o(b,function(a){a.rootController=d})}}function Xa(a){this.__controller=a;g.u.obj.getByPath("h5.core.view")&&(this.__view=g.core.view.createView())}function Sa(b,d,c,f,e){for(var k=0,r=ta.length;k<r;k++)ta[k](this);this.__name=d;this.__templates=null;this.rootElement=b;this.__controllerContext={executeListeners:!0,
isRoot:e,boundHandlers:[],controllerDef:c,args:null};(b=c&&c.__defaultArgs)?this.__controllerContext.args=a.extend({},b,f):f&&(this.__controllerContext.args=f);this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=g.log.createLogger(d);this.view=new Xa(this)}function db(){this.rootElement=document;this.controllers=[];a(document).bind(ib,function(a,b){null==b.target&&(b.target=
document);b.indicator=Fa(this,b);a.stopPropagation()})}function jb(){this._init()}function Pa(b,d,c,f){var k=!f||!f.isInternal;if(!k&&s(f.rootController))return null;var r=d.__name;(!u(r)||0===a.trim(r).length)&&!Za(d)&&m(sb,null,{controllerDefObj:d});c&&!a.isPlainObject(c)&&m(tb,[r],{controllerDefObj:d});d.__controllerContext&&m(Nb,null,{controllerDefObj:d});d.__defaultArgs&&(a.isPlainObject(d.__defaultArgs)||m(Ob,[r],{controllerDefObj:d}));var p=Ea.get(r);p||e(k,b,d,r);k&&h(d,r);p||(p=rb(d),Ea.register(r,
p));k&&D(b,d,r);var g=new Sa(b?a(b).get(0):null,r,d,c,k),j=k?g:f.rootController,o=va(),r=o.promise().fail(kb),x=va(),n=x.promise().fail(kb),l=va(),w=l.promise().fail(kb),v=va(),ua=v.promise(),G=f&&f.async;!1===G&&(o.resolve(),x.resolve(),l.resolve(),v.resolve());k||ua.fail(kb);b=g.__controllerContext;b.cache=p;b.preInitDfd=o;b.initDfd=x;b.postInitDfd=l;b.readyDfd=v;g.preInitPromise=r;g.initPromise=n;g.postInitPromise=w;g.readyPromise=ua;b.childControllers=[];for(var t=k?[]:f.promisesForTriggerInit,
x=0,n=p.logicProperties.length;x<n;x++)l=p.logicProperties[x],r=d[l],Za(r)?(w=r.resolve("namespace"),t.push(w),w.done(function(b,d){return function(c){c=eb(c);g[b]=c;t.splice(a.inArray(d,t),1);t.push(c.readyPromise);c.readyPromise.done(function(b){return function(){t.splice(a.inArray(b,t),1)}}(c.readyPromise))}}(l,w))):g[l]=eb(r);r=a.extend(!0,{},d);d=d.__templates;x=va();n=x.promise();Za(d)||d&&0<d.length?pb(g,x,d):x.resolve();n.done(function(){qa(g)||o.resolveWith(g)}).fail(function(a){o.rejectWith(g,
[a]);da(g,null,a)});x=0;for(n=p.eventHandlerProperties.length;x<n;x++)l=p.eventHandlerProperties[x],g[l]=y(r,l,!0);x=0;for(n=p.functionProperties.length;x<n;x++)l=p.functionProperties[x],g[l]=y(r,l);x=0;for(n=p.otherProperties.length;x<n;x++)l=p.otherProperties[x],g[l]=r[l];b.managed=f&&f.managed;try{if(g.__construct&&g.__construct({args:g.__controllerContext.args}),qa(g))return null}catch(A){return da(j,A),null}k?(g.rootController=g,g.parentController=null):(g.parentController=f.parentController,
g.rootController=f.rootController);if(g.__controllerContext.childControllers){x=0;f=g.__controllerContext.childControllers;for(n=f.length;x<n;x++)f[x].rootController=g.rootController}g.__controllerContext.isExecutedConstruct=!0;f=g.__meta;x=0;for(n=p.childControllerProperties.length;x<n;x++)if(l=p.childControllerProperties[x],d=r[l],b=null,f&&f[l]&&f[l].inheritArgs&&(b=c),Za(d))w=d.resolve("namespace"),t.push(w),w.done(function(b,d,c){return function(f){f=Pa(null,a.extend(true,{},f),c,{isInternal:true,
parentController:g,rootController:j,promisesForTriggerInit:t,async:G});if(f==null)return null;g[b]=f;g.__controllerContext.childControllers.push(f);t.splice(a.inArray(d,t),1)}}(l,w,b));else{b=Pa(null,a.extend(!0,{},r[l]),b,{isInternal:!0,parentController:g,rootController:j});if(null==b)return null;g.__controllerContext.childControllers.push(b);g[l]=b}if(k){var za=function(){t.length===0?W(g,G):fa(t,za)};fa(t,za)}return g}function eb(b){function d(b,c){var f=b.__name;(!u(f)||0===a.trim(f).length)&&
m(Pb,null,{logicDefObj:b});b.__logicContext&&m(Qb,null,{logicDefObj:b});var e=Ea.get(f);e||(c&&j(b),e=Wa(b));for(var r=a.extend(!0,{},b),h=e.functionProperties,p=0,x=h.length;p<x;p++){var o=h[p];r[o]=y(r,o)}r.deferred=va;r.log=g.log.createLogger(f);r.__logicContext={logicDef:b};r.own=cb;r.ownWithOrg=Ga;Ea.register(f,e);F(r.__construct)&&r.__construct();f=e.logicProperties;p=0;for(x=f.length;p<x;p++)o=f[p],e=r[o],Za(e)?(e=e.resolve(),k.push(e),e.done(function(b,c){return function(f){r[b]=d(f);k.splice(a.inArray(c,
k),1)}}(o,e))):r[o]=d(e);return r}function c(){0===k.length?Kb(r,f):fa(k,c)}var f=g.async.deferred(),e=f.promise(),k=[],r=d(b,!0);r.readyPromise=e;fa(k,c);return r}var ra="http://www.w3.org/2000/svg",pa={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},La="Controller",p="Logic",x="h5trackstart",t="h5trackmove",ma="h5trackend",mb="rootElement",ib="triggerIndicator",fb=/^\{.*\}$/,qb=/^\[.*\]$/,hb="{h5view ",r=6001,ua=6003,za=6004,sb=6006,tb=6007,Nb=6008,Cb=6009,Db=6010,Bb=6011,Ib=
6012,Jb=6013,Pb=6017,Qb=6018,Hb=6029,xb=6030,Fb=6033,Eb=6034,Lb=6035,Mb=6036,Gb=6038,Ob=6046,va=g.async.deferred,ya=g.async.isPromise,Aa=g.u.str.startsWith,bb=g.u.str.endsWith,Ha=g.u.str.format,Ta=g.u.obj.argsToArray,sa=g.u.obj.isJQueryObject,Za=g.res.isDependency,kb=function(){},Na,Ea,Ma=[],Ua=[],Ba="",Ia=function(){var a=document.createElement("div");return typeof a.style.touchAction!==ka?(Ba="touchAction",!0):typeof a.style.msTouchAction!==ka?(Ba="msTouchAction",!0):!1}(),ta=[],Ja=function(){var b=
null;return function(){if(null!=b)return b;var d=document.createElementNS(ra,"svg");d.setAttribute("width",1);d.setAttribute("height",1);var f=document.createElementNS(ra,"rect");f.setAttribute("x",1);f.setAttribute("y",1);f.setAttribute("width",1);f.setAttribute("height",1);c(f);a(function(){document.body.appendChild(d);var a=d.getBoundingClientRect().top;d.appendChild(f);b=a===d.getBoundingClientRect().top;document.body.removeChild(d)});return b}}();a.extend(l.prototype,pa);a.extend(Xa.prototype,
{get:function(a,b){Z(this.__controller,"view#get");return oa(a,this.__controller).get(a,b)},update:function(a,b,d){Z(this.__controller,"view#update");a=ca(a,this.__controller);return oa(b,this.__controller).update(a,b,d)},append:function(a,b,d){Z(this.__controller,"view#append");a=ca(a,this.__controller);return oa(b,this.__controller).append(a,b,d)},prepend:function(a,b,d){Z(this.__controller,"view#prepend");a=ca(a,this.__controller);return oa(b,this.__controller).prepend(a,b,d)},load:function(a){Z(this.__controller,
"view#load");return this.__view.load(a)},register:function(a,b){Z(this.__controller,"view#register");this.__view.register(a,b)},isValid:function(a){Z(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){Z(this.__controller,"view#isAvailable");return oa(a,this.__controller).isAvailable(a)},clear:function(a){Z(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){Z(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},
bind:function(b,d){Z(this.__controller,"view#bind");var c=b;if(u(b)&&0===b.indexOf("h5view#")){for(var f=gb(this.__controller.rootElement,b.slice(7)),c=f.nodeValue,c=c.slice(c.indexOf("}")+1),e=a("<div>").append(c),c=[],k=e[0].childNodes,r=0,h=k.length;r<h;r++)c.push(k[r]);e.empty();e=document.createDocumentFragment();r=0;for(h=c.length;r<h;r++)e.appendChild(c[r]);f.parentNode.insertBefore(e,f.nextSibling)}return this.__view.bind(c,d)}});a.extend(Sa.prototype,{$find:function(b){Q(this,"$find");Z(this,
"$find");return a(this.rootElement).find(b)},deferred:function(){Q(this,"deferred");return va()},trigger:function(b,d){Q(this,"trigger");Z(this,"trigger");var c=u(b)?a.Event(b):b;a(this.rootElement).trigger(c,d);return c},own:function(){Q(this,"own");return cb.apply(this,Ta(arguments))},ownWithOrg:function(){Q(this,"ownWithOrg");return Ga.apply(this,Ta(arguments))},bind:function(a,b){Q(this,"bind");this.__controllerContext.isRoot||m(6031);this.rootElement=T(a,this);this.view.__controller=this;nb(this,
b?b:null);W(this);return this},unbind:function(){Q(this,"unbind");Z(this,"unbind");this.__controllerContext.isRoot||m(6031);this.__controllerContext.isExecutedConstruct||m(6037);try{Y(this)}catch(a){da(this,a)}},dispose:function(){Q(this,"dispose");this.__controllerContext.isRoot||m(6031);return da(this)},triggerIndicator:function(b){Q(this,"triggerIndicator");Z(this,"triggerIndicator");var d={indicator:null};b&&a.extend(d,b);a(this.rootElement).trigger(ib,[d]);return d.indicator},indicator:function(a){Q(this,
"indicator");Z(this,"indicator");return Fa(this,a)},enableListeners:function(){Q(this,"enableListeners");z(this,!0)},disableListeners:function(){Q(this,"disableListeners");z(this,!1)},throwError:function(a,b){Q(this,"throwError");var d=Ta(arguments);d.unshift(null);this.throwCustomError.apply(this,d)},throwCustomError:function(a,b,d){Q(this,"throwCustomError");2>arguments.length&&m(6005);var c=null;b&&u(b)?c=Error(Ha.apply(null,Ta(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;
},on:function(a,b,d){Q(this,"on");Z(this,"on");a=wa(a,b,this);b=C(this.__name,"");b.push(q);for(var a=v(this,a,B(d,"",b)),b=0,c=a.length;b<c;b++){var f=a[b];f.isInnerBindObj||(f.originalHandler=d);A(f,O(this.rootElement))}},off:function(a,b,d){Q(this,"off");Z(this,"off");for(var c=wa(a,b,this),a=this.__controllerContext.boundHandlers,f=null,e=c.bindTarget,b=c.eventName,k=c.selector,r=c.isGlobal,c=c.isBindRequested,h=0,p=a.length;h<p;h++){var g=a[h];if(e){if(na(e,g.bindTarget)&&b===g.eventName&&g.originalHandler===
d){f=g;break}}else if(k===g.selector&&r===g.isGlobal&&c===g.isBindRequested&&d===g.originalHandler){f=g;break}}f&&H(f,O(this.rootElement))},manageChild:function(b){Q(this,"manageChild");if(X(this))m(6041);else if(!b||!b.__controllerContext)m(6039);else if(X(b))m(6040);else{b.rootController!==b&&m(6042);ga(this,b);var d=Na.controllers,b=a.inArray(b,d);-1!=b&&d.splice(b,1)}},unmanageChild:function(b,d){Q(this,"unmanageChild");if(X(this))m(6043);else if(b.parentController!==this)m(6044);else if(d=!1===
d?!1:!0,!d&&!b.rootElement)m(6045);else{b.parentController=null;b.rootController=b;b.__controllerContext.isRoot=!0;var c=this.__controllerContext.childControllers,f=a.inArray(b,c);-1!==f&&c.splice(f,1);d?b.dispose():(Na.controllers.push(b),c=this.__controllerContext.waitingPromisesManagerMap,f=b.__controllerContext.waitingPromisesManagerMap,c&&(c.__postInit&&c.__postInit.remove(b.postInitPromise),c.__ready&&c.__ready.remove(b.readyPromise)),f&&f.__init&&f.__init.remove(this.initPromise),this.rootController.__controllerContext.triggerPostInitExecuted?
this.rootController.__controllerContext.triggerReadyInitExecuted||M(b):$a(b))}}});g.mixin.eventDispatcher.mix(db.prototype);a.extend(db.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,d){for(var c=d&&d.deep,f=d&&d.name?K(d.name):null,e=a(b)[0],k=this.controllers,r=[],h=0,p=k.length;h<p;h++){var g=k[h];!(f&&-1===a.inArray(g.__name,f))&&g.rootElement&&(e===g.rootElement?r.push(g):c&&O(e)===O(g.rootElement)&&a.contains(e,g.rootElement)&&r.push(g))}return r}});
a.extend(jb.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});Ea=new jb;Na=new db;g.u.obj.expose("h5.core",{controllerManager:Na,definitionCacheManager:{clear:function(a){Ea.clear(a)},clearAll:function(){Ea.clearAll()}}});var ab=null;ia.controllerInternal=Pa;ia.addControllerInstantiationHook=function(a){ta.push(a)};ia.isDisposing=qa;
g.u.obj.expose("h5.core",{controller:function(a,b,d){2>arguments.length&&m(6032);return Pa(a,b,d)},logic:eb,expose:function(a){var b=a.__name;b||m(6019,null,{target:a});var d=b.lastIndexOf(".");if(-1===d)window[b]=a;else{var c=b.substr(0,d),b=b.substr(d+1,b.length),d={};d[b]=a;g.u.obj.expose(c,d)}}})})();(function(){function c(a){return a instanceof Date}function e(a){return function(d){for(var c=a.queries,f=0,e=c.length;f<e;f++){var h=c[f],g=h.compareFunction;if(!g(d[h.prop],h.queryValue))return!1}c=
a.userFunctions;f=0;for(e=c.length;f<e;f++)if(!c[f](d))return!1;c=a.nestedCriterias;f=0;for(e=c.length;f<e;f++)if(!c[f].match(d))return!1;return!0}}function h(a){return function(d){for(var c=a.queries,f=0,e=c.length;f<e;f++){var h=c[f],g=h.compareFunction;if(g(d[h.prop],h.queryValue))return!0}c=a.userFunctions;f=0;for(e=c;f<e;f++)if(!c[f](d))return!0;c=a.nestedCriterias;f=0;for(e=c.length;f<e;f++)if(c[f].match(d))return!0;return!1}}function j(b){var g=[],n=[],f=[],k={queries:g,nestedCriterias:n,userFunctions:f},
l;for(l in b)if(l!==q)if(a.isPlainObject(b[l]))n.push(j(b[l]));else if(F(b[l]))f.push(b[l]);else{var A=b[l],H=E(A)?A[0]:A,z=null,z=H instanceof RegExp?C:c(H)?B:y,D=a.trim(l.replace(/ +/g," ")).split(" "),u=D[1]||"=";(z=z[u])||m(d,[u,a.type(H)]);g.push({prop:D[0],queryValue:A,compareFunction:z})}k.match="or"===b[q]?h(k):e(k);return k}function D(a){this.result=a}function l(a){this._model=a}var q="__op",y={"=":function(a,d){return a===d},"!=":function(a,d){return a!==d},"<":function(a,d){return a<d},
">":function(a,d){return a>d},"<=":function(a,d){return a<=d},">=":function(a,d){return a>=d},between:function(a,d){var c=d[1];return d[0]<=a&&a<=c},"!between":function(a,d){var c=d[1];return a<d[0]||c<a},"in":function(b,d){return-1!==a.inArray(b,d)},"!in":function(b,d){return-1===a.inArray(b,d)}},C={"=":function(a,d){return d.test(a)},"!=":function(a,d){return!d.test(a)}},B={"=":function(a,d){return!c(a)?!1:a.getTime()===d.getTime()},"!=":function(a,d){return!c(a)?!0:a.getTime()!==d.getTime()},"<":function(a,
d){return!c(a)?!1:a.getTime()<d.getTime()},">":function(a,d){return!c(a)?!1:a.getTime()>d.getTime()},"<=":function(a,d){return!c(a)?!1:a.getTime()<=d.getTime()},">=":function(a,d){return!c(a)?!1:a.getTime()>=d.getTime()},between:function(a,d){if(!c(a))return!1;var e=d[0].getTime(),f=d[1].getTime(),k=a.getTime();return e<=k&&k<=f},"!between":function(a,d){if(!c(a))return!1;var e=d[0].getTime(),f=d[1].getTime(),k=a.getTime();return k<e||f<k},"in":function(a,d){if(!c(a))return!1;for(var e=a.getTime(),
f=0,k=d.length;f<k;f++)if(e===d[f].getTime())return!0;return!1},"!in":function(a,d){if(!c(a))return!0;for(var e=a.getTime(),f=0,k=d.length;f<k;f++)if(e===d[f].getTime())return!1;return!0}},d=1,n={};n[d]='演算子"{0}"で"{1}"型の値を比較することはできません';n[2]="{0}の第1引数が不正です。指定されたキー({1})はモデル{2}に存在しません";n[3]="setOrderFunctionの第1引数が不正です。比較関数を関数で指定してください";n[4]="setOrderFunction()ですでにソート条件が設定済みです。addOrder()でソート条件を追加することはできません。";n[5]="addOrder()ですでにソート条件が追加済みです。setOrderFunction()でソート条件を設定することはできません。";zb(n);a.extend(l.prototype,
{setCriteria:function(a){this._criteria=j(a);return this},execute:function(){this._executeDfd=g.async.deferred();var a=[],d;for(d in this._model.items){var c=this._model.items[d];this._criteria.match(c.get())&&a.push(c)}if(this._orderFunction)a.sort(this._orderFunction);else if(this._addedOrders){var f=this._addedOrders,e=f.length;a.sort(function(a,b){for(var d=0;d<e;d++){var c=f[d],h=c.key,c=c.isAsc,g=a.get(h),h=b.get(h);if(g>h)return c?1:-1;if(g<h)return c?-1:1}return 0})}this._executeDfd.resolveWith(this,
[a]);return new D(a)},onQueryComplete:function(a){this._executeDfd.done(a);return this},setOrderFunction:function(a){F(a)||m(3);this._addedOrders&&m(5);this._orderFunction=a;return this},addOrder:function(a,d){this._model.schema.hasOwnProperty(a)||m(2,["addOrder",a,this._model.name]);this._orderFunction&&m(4);this._addedOrders=this._addedOrders||[];this._addedOrders.push({key:a,isAsc:!1!==d});return this},clearOrder:function(){this._orderFunction=this._addedOrders=null;return this}});Ha={createQuery:function(){return new l(this)}}})();
(function(){function c(a){return(a=a&&u(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function e(b,d){return function sb(b,c){if(!d[b])return!1;for(var f=0,e=d[b].length;f<e;f++)if(-1<a.inArray(d[b][f],c)||sb(d[b][f],c.concat([b])))return!0;return!1}(b,[])}function h(a){return"number"===typeof a&&isNaN(a)}function j(a,b){return null==a||h(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(u(a)||a instanceof
String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function D(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function l(b,d,c){function f(){e.push(w.call(this,arguments));if(c)throw null;}var e=[];try{if(!a.isPlainObject(b))throw f(Fa),null;ya(b.name)||f(la);var k=b.base,h=null;if(null!=k)if(!u(k)||0!==k.indexOf("@"))f(da);else{var g=k.substring(1);d.models[g]?
h=d.models[g].schema:f(Y,g)}var p=b.schema;!h&&null==p&&f(oa);if(!h&&!a.isPlainObject(p))throw f(s),null;}catch(j){m(S,null,e)}}function q(b,d,f,k){function g(){p.push(w.call(this,arguments));if(k)throw null;}"object"!==typeof b&&m(L);var p=[];try{if(d){var x=!1,s;for(s in b)b[s]&&!0===b[s].id&&(x&&g(qa),x=!0);x||g(X)}var n={},x=function(a){if(null!=a){G&&g(gb,t);v.hasOwnProperty("defaultValue")&&g(Pa,t);if(null==a.on)g(cb,t);else for(var d=K(a.on),c=0,f=d.length;c<f;c++)if(!b.hasOwnProperty(d[c])){g(cb,
t);break}"function"!==typeof a.calc&&g(Ga,t);n[t]=K(a.on)}};s=function(a){G&&null==a&&(a="string");var b={};null!=a&&(u(a)?(G&&"string"!==a&&"integer"!==a&&g(ra,t),b=c(a),b.elmType?(b.dataModel&&(d||g(wa,t,b.dataModel),f.models[b.dataModel]||g(Oa,t,b.dataModel)),"enum"===b.elmType&&null==v.enumValue&&g(rb,t)):g(wa,t,a)):g(pb,t))};var l=function(b,d){if(null!=b)if(a.isPlainObject(b)){for(var c in b){var f=b[c];if(null!=f)switch(c){case "notNull":!0!==f&&!1!==f?g(Wa,t,c):G&&!f&&g(ia,t,c,f);break;case "min":case "max":switch(d.elmType){case "integer":(u(f)||
!D(f)||h(f))&&g(R,t,c);break;case "number":(u(f)||u(f)||!j(f)||Infinity===f||-Infinity===f||h(f))&&g(R,t,c);break;default:g(na,t,c,d.elmType)}break;case "minLength":case "maxLength":switch(d.elmType){case "string":u(f)||!D(f)||h(f)||0>f?g(Q,t,c):G&&"maxLength"===c&&0===f&&g(ia,t,c,f);break;default:g(na,t,c,d.elmType)}break;case "notEmpty":switch(d.elmType){case "string":!0!==f&&!1!==f?g(Wa,t,c):G&&!f&&g(ia,t,c,f);break;default:g(na,t,c,d.elmType)}break;case "pattern":switch(d.elmType){case "string":"regexp"!==
a.type(f)&&g(Z,t,c);break;default:g(na,t,c,d.elmType)}}}b.notEmpty&&0===b.maxLength&&g(V,t,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g(V,t,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&g(V,t,"minLength","maxLength")}else g(Va,t)},o=function(b,d){null!=b&&("enum"!==d.elmType&&g(ea,t),(!E(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(fa,t))},t;for(t in b){var v=null==b[t]?{}:b[t],G=d&&!!v.id;ya(t)||g(ob,t);x(v.depend);s(v.type);
var q={},A=G&&null==A?"string":v.type;u(A)&&(q=c(A));l(v.constraint,q);o(v.enumValue,q);G&&v.hasOwnProperty("defaultValue")&&g(ba,t)}for(var M in n)e(M,n)&&g(sa,M)}catch(ma){m(T,null,p)}return!0}function y(a,b){var d=[];try{for(var f in a){var e=a[f];if(e&&(e.hasOwnProperty("defaultValue")||!e.type||!("array"===e.type||c(e.type).dimension))&&e.hasOwnProperty("defaultValue")){var k=e.defaultValue;b[f](k).length&&pushErrorReason(ga,f,k)}}return!0}catch(g){m(T,null,d)}}function C(a,b,f){var e={},k;for(k in a){var g=
e,h=k,p;p=f;var j=a[k]||{},x=[],s=null,l=0,s=j.type,t=j.constraint||{};b&&j.id&&(s=s||"string",t.notNull=!0,"string"===s&&(t.notEmpty=!0));s&&(l=c(s),s=l.elmType,l=l.dimension,x.push(d(s,{manager:p,enumValue:j.enumValue})));t&&x.push(B(t));p=n({checkFuncs:x,dimension:l});g[h]=p}return e}function B(a){return function(b){var d=[];a.notNull&&null==b&&d.push({notNull:a.notNull});a.notEmpty&&!b&&d.push({notEmpty:a.notEmpty});if(null==b)return d;null!=a.min&&b<a.min&&d.push({min:a.min});null!=a.max&&a.max<
b&&d.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&d.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&d.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&d.push({pattern:a.pattern});return d}}function d(b,d){var c=[{type:b}];switch(b){case "number":return function(a,b){return j(a,b)?[]:c};case "integer":return function(a,b){return D(a,b)?[]:c};case "string":return function(a,b){return null==a||u(a)||!b&&a instanceof String?[]:c};case "boolean":return function(a,
b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:c};case "enum":return function(b){var f;a:if(f=d.enumValue,h(b)){for(var b=0,e=f.length;b<e;b++)if(h(f[b])){f=!0;break a}f=!1}else f=null===b||-1<a.inArray(b,f);return f?[]:c};case "any":return function(){return[]}}var f=b.match(/^@(.+?)$/)[1],e=d.manager;return function(a){var b=e.models[f];return!b||"object"!==typeof a&&null!=a?c:null==a||b.has(a)?[]:c}}function n(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};
var d=a.dimension||0;return function(a,c){function f(a,k){if(!k){for(var h=0,r=b.length;h<r;h++){var p=b[h](a,c);if(p.length)return e=e.concat(p),!1}return!0}if(null==a)return!0;if(!E(a)&&!g.core.data.isObservableArray(a))return e.push({dimension:d}),!1;h=0;for(r=a.length;h<r;h++)if(!f(a[h],k-1))return!1;return!0}var e=[];f(a,d);return e}}function b(a,b){a._values={};a._nullProps={};for(var d in b)if(b[d]&&o(b[d].type)){var c=Ra();c.relatedItem=a;a._values[d]=c;a._nullProps[d]=!0}}function o(a){return!a?
!1:-1!==a.indexOf("[]")}function w(){return{code:arguments[0]}}function f(b,d,c,f){function e(d){for(var d=K(h[d].depend.on),c=0,f=d.length;c<f;c++)if(-1===a.inArray(d[c],b._realProperty)&&-1!==a.inArray(d[c],g))return!1;return!0}function k(b,d){for(var c=0,f=d.length;c<f;c++){var e=p[d[c]];if(e)for(var g=0,h=e.length;g<h;g++){var r=e[g];-1===a.inArray(r,b)&&b.push(r)}}}var g=[],h=b.schema||b._model.schema,p=b._dependencyMap,j={};for(f?g=b._dependProps.slice():k(g,K(c));0!==g.length;){for(var c=[],
f=0,x=g.length;f<x;f++){var s=g[f];if(e(s)){var l=h[s].depend.calc.call(b,d);0!==b._validateItemValue(s,l,!0).length&&m(nb,[b._model?b._model.name:pa,s,l]);j[s]={oldValue:b._values[s],newValue:l};h[s]&&o(h[s].type)?l?(b._values[s].copyFrom(l),b._nullProps[s]=!1):(b._values[s].copyFrom([]),b._nullProps[s]=!0):b._values[s]=l}else c.push(s)}k(c,g);g=c}return j}function k(a,b,d,c){for(var f in d){f in a||m($a,[c?c.name:pa,f]);var e=d[f];if(!a[f]||!o(a[f].type)||d.hasOwnProperty(f))e=b(f,e,c&&c._idKey===
f),0<e.length&&m(M,[c?c.name:pa,f],e)}}function v(b,d,c,e){var k=b.schema||b._model.schema,p=[],x;for(x in d)if(!(c&&-1!==a.inArray(x,c))){var s=b._values[x],l=d[x];if(k[x]&&k[x].depend)s!==l&&m(W,[b._model?b._model.name:pa,x]);else{var n=k[x]&&k[x].type;o(n)&&(null==l?(l=[],b._nullProps[x]=!0):b._nullProps[x]=!1);if(n&&n.match(/string|number|integer|boolean/)){var t=l;if(E(t)){for(var t=t.slice(0),l=0,v=t.length;l<v;l++)t[l]=t[l]&&"object"===typeof t[l]?t[l]&&t[l].valueOf&&t[l].valueOf():t[l];l=
t}else l=t&&"object"===typeof t&&t.valueOf?t.valueOf():t}if(null!=l&&n&&n.match(/number|integer/)&&"number"!==typeof l)if(E(l)||g.core.data.isObservableArray(l)){t=0;for(v=l.length;t<v;t++)null!=l[t]&&j(l[t])&&(l[t]=parseFloat(l[t]))}else null!=l&&(l=parseFloat(l));if(!o(n)||!s||!s.equals(l))s===l||h(s)&&h(l)||(n&&-1!==n.indexOf("[]")&&g.core.data.isObservableArray(s)&&(s=s.toArray()),p.push({p:x,o:s,n:l}))}}if(p.length){d={};c=[];t=0;for(x=p.length;t<x;t++)s=p[t],k[s.p]&&o(k[s.p].type)?s.n&&b._values[s.p].copyFrom(s.n):
b._values[s.p]=s.n,d[s.p]={oldValue:s.o,newValue:b.get(s.p)},c.push(s.p);k={type:!0===e?"create":"change",target:b,props:d};a.extend(d,f(b,k,c,e));return k}}function A(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function H(a,b,d){if(a._manager)for(var c=A(a),f=0,e=d.length;f<e;f++){var k=d[f],g=k._values[a._idKey];c[g]||(c[g]=[]);c[g].push({type:b,item:k})}}function z(a,b){if(a._manager){var d=A(a),c=b.target._values[a._idKey];
d[c]||(d[c]=[]);d[c].push({type:La,ev:b})}}function I(b){var d={},c;for(c in b)if(b.hasOwnProperty(c)){var f=b[c]?b[c].depend:null;if(f)for(var f=K(f.on),e=0,k=f.length;e<k;e++){var g=f[e];d[g]||(d[g]=[]);-1===a.inArray(c,d[g])&&d[g].push(c)}}return d}function $(b,d){l(b,d,!0);var c;c=(c=b.base)?d.models[c.slice(1)].schema:{};c=a.extend({},c,b.schema);q(c,!0,d,!0);var f=C(c,!0,d);y(c,f,!0);return new U(c,b,f,d)}function ha(b,d){var c=[],f=[],e=[],k;for(k in b)b[k]&&b[k].depend?f.push(k):c.push(k),
b[k]&&b[k].type&&-1!==b[k].type.indexOf("[]")&&e.push(k);k=I(b);var g={},h;for(h in b){var p=b[h];if(!p||!p.depend){var j=null,j=p&&void 0!==p.defaultValue?p.defaultValue:null;g[h]=j}}return{_realProps:c,_dependProps:f,_aryProps:e,_dependencyMap:k,_createInitialValueObj:function(b){if(!b)return a.extend({},g);var d=a.extend({},g),c;for(c in b)d[c]=b[c];return d},_validateItemValue:function(a,b,c){return d[a](b,c)}}}function Ca(b,d,c,f){var e=!1,k=["sort","reverse","pop","shift"],h=null;c.addEventListener("changeBefore",
function(c){f&&(b._isRemoved||!f._manager)&&m(G,[b._values[f._idKey],c.method]);var p=g.u.obj.argsToArray(c.args);if(-1===a.inArray(c.method,k)){var j=!0;switch(c.method){case "splice":j=!1;p.shift();p.shift();break;case "copyFrom":p=p[0];break;case "set":p.shift()}j&&(c=b._validateItemValue(d,p),0<c.length&&m(M,d,c))}f?(f._manager&&(c=f._manager,p=f.name,c._oldValueLogs||(c._oldValueLogs={}),c._oldValueLogs[p]||(c._oldValueLogs[p]={}),c=c._oldValueLogs[p],p=b._values[f._idKey],c[p]||(c[p]={}),c[p][d]||
(c[p][d]=b._values[d].toArray())),(e=f._manager?f._manager.isInUpdate():!1)||f._manager.beginUpdate()):h=b._values[d].toArray()});c.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var k={type:"change",target:b,props:{}};k.props[d]={};f?(z(f,k),e?a.stopImmediatePropagation():(f._manager._isArrayPropChangeSilentlyRequested=!0,f._manager.endUpdate(),f._manager._isArrayPropChangeSilentlyRequested=!1)):c.equals(h)||(k.props[d]={oldValue:h,newValue:b._values[d]},b.dispatchEvent(k))}})}
function N(a){ya(a)||m(aa);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function U(a,b,d,c){this.items={};this.size=0;this.name=b.name;this._manager=c;for(var f in a)a[f]&&a[f].id&&(this._idKey=f);this._idType=(b=a[this._idKey].type)?"string"===b?O:ja:O;this.schema=a;this._itemConstructor=Ya(a,d,this);c.models[this.name]=this}function Ya(d,c,f){function e(a){b(this,d,h,a);a=h._createInitialValueObj(a);k(d,h._validateItemValue,a,f);v(this,a,null,!0);
for(var a=h._aryProps,c=0,g=a.length;c<g;c++)Ca(this,a[c],this.get(a[c]),f)}var h=ha(d,c);f._schemaInfo=h;g.mixin.eventDispatcher.mix(e.prototype);a.extend(e.prototype,h,p,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return e}function ca(){}function P(){this.length=0;this._src=[]}function Ra(){return new P}function J(a){return a&&a.constructor===P?!0:!1}var O="string",ja="number",aa=15E3,S=15001,G=15005,L=15008,T=15009,M=15011,W=15012,$a=15013,nb=15016,Fa=
15900,la=15901,da=15902,Y=15903,oa=15904,s=6,qa=15800,X=15801,ob=15802,gb=15803,cb=15804,Ga=15805,pb=15806,wa=15807,Oa=15808,rb=15809,Va=15810,Wa=15811,R=15812,na=15813,Z=15814,Q=15815,V=15816,ea=15817,fa=15818,ba=15819,ga=15820,ia=15821,Pa=15822,sa=15823,ra=15824,pa="n/a",La=2,p={get:function(b){if(0===arguments.length)return a.extend({},this._values);var d=this._model;if(!(d?d.schema:this.schema).hasOwnProperty(b))m(15014,[d?d.name:pa,b]);return this._values[b]},set:function(a){var b=a;2===arguments.length&&
(b={},b[arguments[0]]=arguments[1]);var d=this._model;d&&(this._isRemoved||!d._manager)&&m(G,[this._values[this._model._idKey],"set"],this);if(d)d._idKey in b&&b[d._idKey]!==this._values[d._idKey]&&m(15003,[d.name,this._idKey]),k(d.schema,d._schemaInfo._validateItemValue,b,d);else{var c=this.validate(b);if(c)throw c;}var c=null,f=d?d._manager.isInUpdate():!1;d&&!f&&d._manager.beginUpdate();this._isInSet=!0;c=v(this,b);this._isInSet=!1;d?(c&&z(d,c),f||d._manager.endUpdate()):c&&this.dispatchEvent(c)},
regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};g.mixin.eventDispatcher.mix(N.prototype);a.extend(N.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&m(S,null,[w(Fa)]);if(!E(b))return this.models[b.name]?this.models[b.name]:$(b,this);var d=b.length;d||m(S,null,[w(Fa)]);for(var c={},f=[],e=0;e<d;e++){var k=
b[e].name;if(this.models[k])x[e]=manager.models[b.name];else try{f.push(k);k=[];b[e].base&&k.push(b[e].base.substring(1));for(var g in b[e].schema){var h=b[e].schema[g];if(h){var p=h.type;p&&"@"===p.substring(0,1)&&(p=-1===p.indexOf("[]")?p.substring(1):p.substring(1,p.length-2),k.push(p))}}c[e]={depends:k}}catch(j){m(S)}}for(var x={size:0};x.size<d;){g={};h=!1;for(e=0;e<d;e++)if(!c[e].registed){for(var k=c[e].depends,p=0,s=k.length;p<s;p++)if(!this.models[k[p]]){g[k[p]]=!0;break}p===s&&(x[e]=$(b[e],
this),x.size++,h=!0,c[e].registed=!0)}if(!h){var e=!0,l;for(l in g)if(-1===a.inArray(l,f)){e=!1;break}e&&m(15004);m(S,null,[w(Y,l)])}}b=[];for(e=0;e<d;e++)b.push(x[e]);return b},dropModel:function(a){if((a=u(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,d=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var c={},f;for(f in b)if(b.hasOwnProperty(f)){var e;e=this.models[f];var k=b[f],g=[],p=[],j=[],x=[],s=void 0;for(s in k){for(var l=k[s],n=!0,t=[],o=l.length-1;0<=o;o--){var m=l[o],v=m.type;if(v===La)t.push(m.ev);else{a:{for(n=0;n<o;n++){var G=l[n].type;if(1===G||3===G){o=l[n];break a}}o=null}if(1===v)o&&3===o.type?g.push({id:s,oldItem:o.item,newItem:m.item}):p.push(m.item);else if(o=
o&&3===o.type?o.item:o?null:m.item)x.push(o),o.dispatchEvent({type:"remove",model:e});n=!1;break}}if(n&&0<t.length){m={};for(o=t.length-1;0<=o;o--)for(var w in t[o].props)m[w]||(J(e.get(s).get(w))?(v=d&&d[e.name]&&d[e.name][s]&&d[e.name][s][w],e.get(s).get(w).equals(v)||(m[w]={oldValue:v})):m[w]={oldValue:t[o].props[w].oldValue});o=!1;for(w in m)v=m[w].oldValue,l=e.get(s).get(w),v===l||h(v)&&h(l)?delete m[w]:(o=e.get(s).get(w),a&&J(o)&&o.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
m[w].newValue=o,o=!0);o&&(t={type:"change",target:t[0].target,props:m},j.push(t),t.target.dispatchEvent(t))}}(e=0===p.length&&0===g.length&&0===x.length&&0===j.length?!1:{created:p,recreated:g,removed:x,changed:j})&&(c[f]=e)}a=!1;for(f in c)a=!0,e=c[f],this.models[f].dispatchEvent({type:"itemsChange",created:e.created,recreated:e.recreated,removed:e.removed,changed:e.changed});c={type:"itemsChange",models:c};a&&this.dispatchEvent(c)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
d={};d[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:d})}});g.mixin.eventDispatcher.mix(U.prototype);a.extend(U.prototype,{create:function(a){this._manager||m(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],c=K(a),f=[],e=this._idKey,k=0,g=c.length;k<g;k++){var h=c[k],p=h[e],j=this._findById(p);j?(f.push(j),(p=v(j,h,[e]))&&z(this,p)):(h=new this._itemConstructor(h),this.items[p]=
h,this.size++,d.push(h),f.push(h))}0<d.length&&H(this,1,d);b||this._manager.endUpdate();return E(a)?f:f[0]},validate:function(a,b){try{var d=this._idKey,c=K(a);"object"!==typeof a&&!E(a)&&m(15007);if(b)for(var f=0,e=c.length;f<e;f++){var g=c[f],h=g[d];(""===h||null==h)&&m(15002,[this.name,d]);var p=this._schemaInfo._createInitialValueObj(g);k(this.schema,this._schemaInfo._validateItemValue,p,this)}else for(var f=0,j=c.length;f<j;f++)g=c[f],k(this.schema,this._schemaInfo._validateItemValue,g,this)}catch(x){return x}return null},
get:function(a){if(E(a)||g.core.data.isObservableArray(a)){for(var b=[],d=0,c=a.length;d<c;d++)b.push(this._findById(a[d]));return b}return this._findById(a)},remove:function(a){this._manager||m(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,c=K(a),f=[],e=[],k=0,g=c.length;k<g;k++)if(this.has(c[k])){var h=u(c[k])||D(c[k],!0)?c[k]:c[k]._values[d],p=this.items[h];delete this.items[h];this.size--;e.push(p);p._model&&
(p._isRemoved=!0);f.push(p)}else e.push(null);0<f.length&&H(this,3,f);b||this._manager.endUpdate();return E(a)?e:e[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return u(a)||D(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&F(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ka?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,d;for(d in b)b.hasOwnProperty(d)&&a.push(b[d]);return a},createQuery:Ha.createQuery});g.mixin.eventDispatcher.mix(ca.prototype);a.extend(ca.prototype,p,{validate:function(a){try{var b=a;2===arguments.length&&(b={},b[arguments[0]]=arguments[1]);k(this.schema,this._validateItemValue,b)}catch(d){return d}return null}});
g.mixin.eventDispatcher.mix(P.prototype);var x={equals:function(a){var b=J(a);if(!b&&!E(a))return!1;a=b?a._src:a;b=this.length;if(a.length!==b)return!1;for(var d=0;d<b;d++){var c=this[d],f=a[d];if(!(c===f||h(c)&&h(f)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=J(a)?a._src:a;E(a)||m(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=
g.u.obj.argsToArray(arguments),b=0,d=a.length;b<d;b++)J(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},t="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ma;for(ma in x)x.hasOwnProperty(ma)&&-1===a.inArray(ma,t)&&t.push(ma);var mb=["concat","slice","splice","filter","map"],ib=["reverse","sort"],fb="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ma=0;for(var qb=t.length;ma<
qb;ma++){var hb=t[ma];P.prototype[hb]=function(b){function d(){var f=c.apply(this._src,arguments);if(-1!==a.inArray(b,ib))f=this;else if(-1!==a.inArray(b,mb)){var e=Ra();e.copyFrom(f);f=e}return f}var c=x[b]?x[b]:Array.prototype[b];return-1===a.inArray(b,fb)?d:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=d.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(hb)}g.u.obj.expose("h5.core.data",
{createManager:function(a,b){ya(a)||m(aa);var d=new N(a);if(null!=b){""===b&&(b="window");var c={};c[a]=d;g.u.obj.expose(b,c)}return d},createObservableArray:Ra,createObservableItem:function(a){q(a,!1,null,!0);var d=C(a);y(a,d,!0);var c=new ca,d=ha(a,d);b(c,a,d);c.schema=a;for(var f in d)c[f]=d[f];f=d._createInitialValueObj();k(a,d._validateItemValue,f);v(c,f,null,!0);a=0;for(d=c._aryProps.length;a<d;a++)Ca(c,c._aryProps[a],c.get(c._aryProps[a]));return c},isObservableArray:J,isObservableItem:function(a){return!(!a||
!a.constructor||!a._validateItemValue||F(a.getModel))},createSequence:function(b,d,c){function f(){return p}function e(){var a=p;p+=j;return a}function k(){return p.toString()}function g(){var a=p;p+=j;return a.toString()}function h(){}var p=null!=b?b:1,j=null!=d?d:1,b=1===c?{current:k,next:g,returnType:1}:{current:f,next:e,returnType:2};b.setCurrent=function(a){p=a};a.extend(h.prototype,b);return new h},SEQ_STRING:1,SEQ_INT:2})})();(function(){function c(c){return g.u.obj.isJQueryObject(c)?c:a(c)}
function e(){this.__cachedTemplates={}}var h=g.async.deferred,j={escapeHtml:function(a){return g.u.str.escapeHtml(a)}};a.extend(e.prototype,{load:function(c){var e=h(),j=null;switch(a.type(c)){case "string":a.trim(c)||m(7004);j=[c];break;case "array":j=c;0===j.length&&m(7004);for(var c=0,D=j.length;c<D;c++)u(j[c])?a.trim(j[c])||m(7004):m(7004);break;default:m(7004)}for(var D=[],c=0,B=j.length;c<B;c++)D.push(g.res.get(j[c]));var d=this;fa(D,function(a){for(var a=E(a)?a:[a],b=[],c,g=0,f=a.length;g<
f;g++){for(var k=a[g].templates,h=0,j=k.length;h<j;h++){if(!d.isValid(k[h].content)){c=k[h];break}b.push(k[h])}if(c)break}if(c)try{d.register(c.id,c.content)}catch(l){return l.detail.url=a[g].url,l.detail.path=a[g].path,e.reject(l)}g=0;for(f=b.length;g<f;g++)d.register(b[g].id,b[g].content);e.resolve()},function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);return a},register:function(c,e){"string"!==a.type(e)?m(7E3,null,
{id:c}):(!u(c)||!a.trim(c))&&m(7002,[]);try{var g=new EJS.Compiler(e,"[");g.compile();this.__cachedTemplates[c]=g.process}catch(h){g=h.lineNumber,m(7010,[g?" line:"+g:"",h.message],{id:c})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(c,e){var g=this.__cachedTemplates;(!u(c)||!a.trim(c))&&m(7002);(g=g[c])||m(7005,c);var h=e?a.extend(!0,{},e):{},D=h.hasOwnProperty("_h")?new EJS.Helpers(h):new EJS.Helpers(h,{_h:j}),d=null;try{d=g.call(h,h,D)}catch(n){m(7006,
n.toString(),n)}return d},update:function(a,e,g){return c(a).html(this.get(e,g))},append:function(a,e,g){return c(a).append(this.get(e,g))},prepend:function(a,e,g){return c(a).prepend(this.get(e,g))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(c){if(typeof c===ka)this.__cachedTemplates={};else{var e=null;switch(a.type(c)){case "string":e=[c];break;case "array":c.length||m(7002);e=c;break;default:m(7002)}for(var c=0,g=e.length;c<g;c++){var h=e[c];(!u(h)||!a.trim(h))&&
m(7002)}c=0;for(g=e.length;c<g;c++)delete this.__cachedTemplates[e[c]]}},bind:function(c,e){var h=null;null==c&&m(7007);E(c)?h=c:(h=a(c),0===h.length&&m(7007),h=h.toArray());(null==e||"object"!==typeof e||E(e)||g.core.data.isObservableArray(e))&&m(7009);return sa.createBinding(h,e)}});var D=new e;D.createView=function(){return new e};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&c&&(e=new EJS.Compiler(e,"["),e.compile(),D.__cachedTemplates[c]=
e.process)})});g.u.obj.expose("h5.core",{view:D})})();(function(){function c(a,b){return!a||a.nodeType!==ba?void 0:a.getAttribute(b)}function e(a){if(!a)return null;for(var b=[],d=0,c=a.length;d<c;d++)b.push(a[d]);return b}function h(a,b,d,c){var f=[],b=K(b);if(!0===c)return j(f,a,b,d),f;for(var a=a.childNodes,c=0,e=a.length;c<e;c++)j(f,a[c],b,d);return f}function j(a,b,d,c){if(b.nodeType===ba){for(var f=0,e=d.length;f<e;f++){var k=b.getAttribute(d[f]);if(typeof c===ka){if(null!==k){a.push(b);break}}else if(null!==
k&&k==c){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;f=0;for(e=b.length;f<e;f++)j(a,b[f],d,c)}}}function D(b,d){for(var b=K(b),f=[],e=0,k=b.length;e<k;e++){var g=b[e];if(g.nodeType===ba&&!(!0===d&&(null!=c(g,A)||null!=c(g,H))))for(var j=h(g,v,void 0,!0),n=0,l=j.length;n<l;n++){for(var o=!0,m=j[n];null!=m&&m!==g;m=m.parentNode)if(null!=c(m,A)||null!=c(m,H)){o=!1;break}o&&f.push(j[n])}}return a(f)}function l(b,d,f){for(var e=[],k=0,g=b.length;k<g;k++){var j=b[k];if(j.nodeType===ba){if(!0===
f){if(null!=j.getAttribute(d)){e.push(j);continue}if(null!=c(j,A)||null!=c(j,H))continue}for(var n=h(j,d,void 0,!1),l=0,o=n.length;l<o;l++){var m=a(n[l])[0],v=m.parentNode;(null==c(v,A)&&null==c(v,H)||v===j)&&e.push(m)}}}return a(e)}function q(a){return a&&a.addEventListener&&a.getModel&&!E(a)&&!g.core.data.isObservableArray(a)||g.core.data.isObservableItem(a)?!0:!1}function y(a,b){for(var d=0,c=a.length;d<c;d++){var f=a[d];f.nodeType===ba&&f.setAttribute(I,b)}}function u(b,d,f){var k=J++,h=d[0];
a(h).empty();if(f){!E(f)&&!g.core.data.isObservableArray(f)&&m(P);y(d,k);b._addBindingEntry(f,h,k);g.core.data.isObservableArray(f)&&!b._isWatching(f)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=d,f.addEventListener("change",d));var d=c(h,z),d=e(b._getSrcCtxNode(d).childNodes),j=[];b._loopElementsMap[k]=j;for(var k=h.ownerDocument.createDocumentFragment(),n=f.get?function(a){return f.get(a)}:function(a){return f[a]},l=0,o=f.length;l<o;l++){for(var v=[],
w=0,A=d.length;w<A;w++){var s=S(d[w]);v.push(s);k.appendChild(s)}j[l]=v;h.appendChild(k);B(b,v,n(l),!1,!0)}}}function B(a,b,c,f,e){b=K(b);if(f)u(a,b,c);else{f=J++;c&&(("object"!==typeof c||E(c)||g.core.data.isObservableArray(c))&&m(P),y(b,f),a._addBindingEntry(c,b,f));var k=q(c);k&&!a._isWatching(c)&&(f=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=f,c.addEventListener("change",f));D(b,e).each(function(){n(this,c,k)});d(a,b,c,!1,e);d(a,b,c,!0,e)}}function d(a,
b,d,f,e){var k=f?"data-h5-loop-context":"data-h5-context";l(b,k,e).each(function(){var b=c(this,k),e=null;d&&(e=q(d)?d.get(b):d[b]);B(a,this,e,f)})}function n(b,d,f){for(var e=c(b,v).split(N),k=[],g=[],h=[],j=0,n=e.length;j<n;j++){var l=e[j];if(-1===l.indexOf(F))0<a.trim(l).length&&(k.push(null),g.push(null),h.push(a.trim(l)));else{var o=l.split(F),l=a.trim(o[0]),o=a.trim(o[1]),w=null,s=U.exec(l);s&&(w=s[1],l=/(\S+)[\s\(]/.exec(l)[1]);0<l.length&&0<o.length&&(k.push(l),g.push(w),h.push(o))}}e=b.tagName.toLowerCase();
j=a(b);n=0;for(l=k.length;n<l;n++){var w=k[n],s=g[n],A=h[n],o=null;d&&(o=f?d.get(A):d[A]);null==w&&("input"===e?(w="attr",s="value"):w="text");switch(w){case "text":null==o?j.text(""):j.text(o);break;case "html":null==o?j.html(""):j.html(o);break;case "class":var w=c(b,ha),A=(s=null==w)?"":" ",X=!1;o&&(X=!RegExp("\\s"+o+"\\s").test(" "+w+" "));j[0].className=(s?"":w)+(X?A+o:"");break;case "attr":s||m(Ya);"input"===e&&"value"===s?null==o?j.val(""):j.val(o):null==o?j.removeAttr(s):j.attr(s,o);break;
case "style":s||m(Ya);null==o?j.css(s,""):j.css(s,o);break;default:m(ca)}}}function b(a,b,d){for(var c=0,f=d.length;c<f;c++){var e=d[c];b.removeChild(e);a._removeBinding(e)}}function o(a){for(var a=a.childNodes,b=[],d=0,c=a.length;d<c;d++)b.push(S(a[d]));return b}function w(a,b,d,c,f){for(var e=d.ownerDocument.createDocumentFragment(),k=[],g=0,h=f.length;g<h;g++){var j=o(d);k[g]=j;for(var n=0,l=j.length;n<l;n++)e.appendChild(j[n]);B(a,j,f[g])}Array.prototype[c].apply(b,k);return e}function f(a,d,
c,f,e,k){var g=f.length;if(0!==g){for(var h=f[0],j=h,c=1===g?c.length:j+f[1];j<c;j++){var n=e[j];n&&b(a,d,n)}e.splice(h,f[1]);if(!(2>=g)){j=e.length;j=0===j||0===h?d.firstChild:h>=j?null:e[h][0];c=k.ownerDocument.createDocumentFragment();h=[h,0];for(n=2;n<g;n++){for(var l=o(k),m=0,s=l.length;m<s;m++)c.appendChild(l[m]);B(a,l,f[n]);h.push(l)}d.insertBefore(c,j);Array.prototype.splice.apply(e,h)}}}function k(a,b){void 0!==a.nodeType?a.nodeType===ba&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=
a[0].parentNode,this._targets=e(a));this._bindRootId=R++;ja[this._bindRootId]=this;for(var d=[],f=0,k=this._targets.length;f<k;f++){var g=this._targets[f];if(g.nodeType===ba){g.setAttribute($,this._bindRootId);for(var j=h(g,[A,H],void 0,!0),n=0,l=j.length;n<l;n++){var o=O++;j[n].setAttribute(z,o)}j=h(g,v,void 0,!0);n=0;for(l=j.length;n<l;n++)o=j[n],/class\s*:/.test(c(o,v))&&""!=o.className&&o.setAttribute(ha,o.className)}d.push(g.cloneNode(!0))}this._srces=d;this._loopElementsMap={};this._rootContext=
b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};B(this,this._targets,this._rootContext,!1,!0)}var v="data-h5-bind",A="data-h5-context",H="data-h5-loop-context",z="data-h5-dyn-ctx",I="data-h5-dyn-vid",$="data-h5-dyn-bind-root",ha="data-h5-dyn-cn",F=":",N=";",U=/\(\s*(\S+)\s*\)/,Ya=7100,ca=7101,P=7102,O=0,J=0,R=0,ja={},aa={},S;(function(){var b=document.createElement("div");b.h5Dummy="a";var d=b.cloneNode(!1),c=void 0!==d.h5Dummy;b.h5Dummy=void 0;c?(d.h5Dummy=void 0,S=function(b){var d=
b.ownerDocument;return b.nodeType===ba?a(a.trim(b.outerHTML),d)[0]:b.cloneNode(!0)}):S=function(a){return a.cloneNode(!0)}})();a.extend(k.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var d=this._targets[a];if(d.nodeType===ba){this._removeBinding(d);d.removeAttribute($);for(var c=h(d,ha,void 0,!0),f=0,e=c.length;f<e;f++)c[f].removeAttribute(ha);d=h(d,z,void 0,!0);f=0;for(c=d.length;f<c;f++)d[f].removeAttribute(z)}}delete ja[this._bindRootId]},_observableArray_changeListener:function(a){var d=
this._getViewsFromSrc(a.target);if(d)for(var e in d)if(d.hasOwnProperty(e)){var k=d[e],g=this._getSrcCtxNode(c(k,z)),h=this._loopElementsMap[e];switch(a.method){case "set":f(this,k,a.target,[a.args[0],1,a.args[1]],h,g);break;case "shift":case "pop":var j=h[a.method]();j&&b(this,k,j);break;case "unshift":j=w(this,h,g,a.method,a.args);k.insertBefore(j,k.firstChild);break;case "push":j=w(this,h,g,a.method,a.args);k.appendChild(j);break;case "splice":f(this,k,a.target,a.args,h,g);break;case "reverse":for(var j=
k,n=h;j.firstChild;)j.removeChild(j.firstChild);for(var l=0,k=n.length;l<k;l++)for(var g=n[l],m=g.length-1;0<=m;m--)j.insertBefore(g[m],j.firstChild);h.reverse();break;case "sort":case "copyFrom":case null:for(var j=this._loopElementsMap,n=e,l=a.target,m=h,h=g,g=0,v=m.length;g<v;g++)b(this,k,m[g]);for(var m=k.ownerDocument.createDocumentFragment(),v=[],g=0,A=l.length;g<A;g++){var s=o(h);v[g]=s;for(var qa=0,X=s.length;qa<X;qa++)m.appendChild(s[qa]);B(this,s,l.get(g))}k.appendChild(m);j[n]=v}}},_observableItem_changeListener:function(a){var b=
this._getViewsFromSrc(a.target);if(b){var d=!1;a.target===this._rootContext&&(d=!0);var f=this,e;for(e in b)if(b.hasOwnProperty(e)){var k=b[e];D(k,d).each(function(){n(this,a.target,!0)});l(k,A).each(function(){var b=c(this,A);if(!(b in a.props))return!0;f._removeBinding(this);var d=c(this,z),d=f._getSrcCtxNode(d),d=S(d);this.parentNode.replaceChild(d,this);B(f,d,a.props[b].newValue)});l(k,H).each(function(){var b=c(this,H);if(!(b in a.props)||a.target._isArrayProp(b))return!0;f._removeBinding(this);
B(f,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,d=this._srces.length;b<d;b++){var f=this._srces[b];if(c(f,z)===a)return f;f=h(f,z,a);if(0<f.length)return f[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,d){var c=this._getContextIndex(a);-1===c&&(this._usingContexts.push(a),c=this._usingContexts.length-1);aa[d]=
a;(a=this._srcToViewMap[c])?a[d]=b:(a={},a[d]=b,this._srcToViewMap[c]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=aa[a];if(b){var d=this._getContextIndex(b);if(-1!==d){var c=this._srcToViewMap[d];c&&c[a]&&(delete c[a],this._hasBindingForSrc(c)||(c=!1,q(b)?(b.removeEventListener("change",this._listeners[d]),c=!0):g.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[d]),c=!0),c&&delete this._listeners[d],
delete this._srcToViewMap[d],this._usingContexts[d]=null))}aa[a]&&delete aa[a]}},_removeBinding:function(a){if(a.nodeType===ba){var b=c(a,I);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(I));for(var a=h(a,I),b=0,d=a.length;b<d;b++){var f=a[b];this._removeBindingEntry(c(f,I));f.removeAttribute(I)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});sa={createBinding:function(a,b){return new k(a,b)}}})();(function(){function c(a,c){return null==
a||"number"===typeof a&&isNaN(a)||"number"===typeof a||!c&&(a instanceof Number||!(!(u(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function e(a,c){return!!(null==a||u(a)||!c&&a instanceof String)}function h(a,c){return null==a||"boolean"===typeof a||!c&&a instanceof Boolean}function j(d){var c=d.name;d.isValid?(this.validProperties.push(c),this.validCount++):(this.isValid=!1,this.invalidProperties.push(c),this.invalidCount++,this.invalidReason=this.invalidReason||{},this.invalidReason[c]=
{name:c,value:d.value,violation:[d.violation]});this.validatingProperties.splice(a.inArray(c,this.validatingProperties),1);if(!this.isValid||!this.validatingProperties.length)this.isAllValid=this.isValid}function m(a){this.isValid=a.isValid;this.validProperties=a.validProperties;this.invalidProperties=a.invalidProperties;this.validatingProperties=a.validatingProperties;this.invalidReason=a.invalidReason;this.validCount=a.validProperties.length;this.invalidCount=a.invalidProperties.length;this.isAsync=
a.isAsync;this.isAllValid=a.isAllValid;this.properties=a.properties;this.addEventListener(y,j);this.dispatchEvent=function(){this._aborted||m.prototype.dispatchEvent.apply(this,arguments)}}function l(){this.rules=[];this.rulesMap={}}function q(a,c,b,e){B.addValidateRule(a,c,b,e)}var y="validate",C=g.async.isPromise,B=new l;g.mixin.eventDispatcher.mix(m.prototype);m.prototype.abort=function(){this.removeEventListener(y,j);this.dispatchEvent({type:"abort"});this._aborted=!0};a.extend(l.prototype,{addValidateRule:function(a,
c,b,e){if(this.rulesMap[a])for(var g=0,f=this.rules.length;g<f;g++)if(this.rules[g].ruleName===a){this.rules.splice(g,1);break}c={ruleName:a,func:c,priority:e,argNames:b};this.rules.push(c);this.rulesMap[a]=c},getValidateFunction:function(a){return this.rulesMap[a]&&this.rulesMap[a].func},getValidateArgNames:function(a){return this.rulesMap[a]&&this.rulesMap[a].argNames},sortRuleByPriority:function(a){var c=this.rulesMap;a.sort(function(a,d){var e=c[a],f=c[d],e=null==e.priority?-Infinity:e.priority,
f=null==f.priority?-Infinity:f.priority;return e===f?0:f-e})}});q("required",function(a){return null!=a&&""!==a},null,51);q("customFunc",function(a,c){return c(a)},["func"],50);q("assertNull",function(a){return null==a},null,50);q("assertNotNull",function(a){return void 0===a?!0:null!=a},null,50);q("assertFalse",function(a){return null==a||h(a)&&!1==a},null,50);q("assertTrue",function(a){return null==a||h(a)&&!0==a},null,50);q("max",function(a,e,b){return null==a||(c(a,!0)||a instanceof Number)&&
(b?a<=e:a<e)},["max","inclusive"],50);q("min",function(a,e,b){return null==a||(c(a,!0)||a instanceof Number)&&(b?e<=a:e<a)},["min","inclusive"],50);q("future",function(a){return null==a||a instanceof Date&&(new Date).getTime()<a.getTime()},null,50);q("past",function(a){return null==a||a instanceof Date&&a.getTime()<(new Date).getTime()},null,50);q("digits",function(a,c,b){if(null==a)return!0;if(!e(a)||!/^([+|-])?\d*(\.\d+)?$/.test(a))return!1;var g=parseInt(a);return null!=c&&(0>g?-g:g)>=Math.pow(10,
c)?!1:null!=b?(c=a.indexOf("."),-1===c?!0:a.slice(c+1).length<=b):!0},["integer","fruction"],50);q("pattern",function(a,c){return null==a||e(a)&&c.test(a)},["regexp"],50);q("size",function(d,c,b){c=c||0;b=b||Infinity;if(a.isPlainObject(d)){var g=0,h;for(h in d)g++;return c<=g&&g<=b}return null==d||(e(d)||E(d))&&c<=d.length&&d.length<=b},["min","max"],50);g.u.obj.expose("h5.validation",{defineRule:q});g.core.expose({__name:"h5.validation.FormValidationLogic",_rule:{},_disableProperties:[],validate:function(d,
c){var b={},e=[],g;for(g in d){if(a.isPlainObject(d[g]))for(var f in d[g])b[f]=d[g][f],e.push(f);b[g]=d[g]}g=null;c&&(g=(a.isArray(c)?c.slice(0):[c]).concat(e));return this._validate(b,g)},addRule:function(a){for(var c in a)this._rule[c]=a[c]},removeRule:function(a){E(a)||delete this._rule[a];for(var c=0,b=a.length;c<b;c++)delete this._rule[a[c]]},disableRule:function(c){for(var c=K(c),e=0,b=c.length;e<b;e++)-1===a.inArray(c[e],this._disableProperties)&&this._disableProperties.push(c[e])},enableRule:function(c){for(var c=
K(c),e=0,b=c.length;e<b;e++){var g=a.inArray(c[e],this._disableProperties);-1!==g&&this._disableProperties.splice(g,1)}},_validate:function(c,e){var b=[],g=[],h=[],f=[],k=null,j=e&&(E(e)?e:[e]),l=!1,q={},z;for(z in this._rule)if(!(e&&-1===a.inArray(z,j)||-1!==a.inArray(z,this._disableProperties))){var I=this._rule[z],u=c[z],ha=!1,F=!1,N=[],U;for(U in I)N.push(U);B.sortRuleByPriority(N);for(var K=0,O=N.length;K<O;K++){U=N[K];var P=I[U];if(c.hasOwnProperty(z)&&null!=P||"required"===U&&P){var R=this._convertBeforeValidate?
this._convertBeforeValidate(u,U):u,P=E(P)?[R].concat(P):[R,P],J=B.getValidateFunction(U);if(!J)break;var J=J.apply(this,P),V={},ja=B.getValidateArgNames(U);if(ja)for(var aa=0,S=ja.length;aa<S;aa++)V[ja[aa]]=P[aa+1];C(J)&&!xa(J)&&!Qa(J)&&(F=!0,q[z]=q[z]||[],q[z].push(J.promise({ruleName:U,value:R,ruleValue:V})));if(!J||C(J)&&xa(J))k=k||{},k[z]||(k[z]={name:z,value:u,violation:[]}),k[z].violation.push(this._createViolation(U,V)),ha=!0}}F?(l=!0,f.push(z)):(ha?g:b).push(z);h.push(z)}var j=!g.length,G=
new m({validProperties:b,invalidProperties:g,validatingProperties:f,properties:h,invalidReason:k,isAsync:l,isValid:j,isAllValid:j?l?null:!0:!1});if(l){var L=function(a){a.validCount+a.invalidCount===a.properties.length&&(a.isAllValid=a.isValid,a.dispatchEvent({type:"validateComplete"}))},T=this;for(z in q)b=q[z],g=function(a){return function(){G.dispatchEvent({type:y,name:a,isValid:!0,value:c[a]});L(G)}}(z),h=function(b,c){return function(){if(-1===a.inArray(b,G.invalidProperties)){for(var d,f,e,
k=0,g=c.length;k<g;k++){var h=c[k];if(xa(h)){d=h.ruleName;f=h.ruleValue;e=h.value;break}}G.dispatchEvent({type:y,name:b,isValid:!1,value:e,violation:T._createViolation(d,f,arguments)});L(G)}}}(z,b),a.when.apply(a,b).done(g).fail(h)}return G},_createViolation:function(a,c,b){a={ruleName:a,ruleValue:c};b&&(a.reason=g.u.obj.argsToArray(b));return a},_convertBeforeValidate:function(a,c){if(null==a)return a;switch(c){case "max":case "min":return parseFloat(a);case "future":case "past":return new Date(a)}return a}})})();
(function(){function c(b){var c={},d;for(d in aa){var f=a("<div></div>").addClass(b).addClass(d).appendTo("body"),e=a.camelCase(d);c[e]={};a.map(aa[d],function(a){c[e][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function e(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function h(a,b){for(var c=[],d=a/2,f=0.8*a/2,e=360/b*Math.PI/180,k=1;k<=b;k++){var g=e*k,h=Math.cos(g),g=Math.sin(g);c.push({from:{x:d+f/2*h,y:d+f/
2*g},to:{x:d+f*h,y:d+f*g}})}return c}function j(a){return function(){var b=document.body,c=document.documentElement,d=L?b:T?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function m(a){return function(){var b=L?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function l(a){var b=L?document.body:document.documentElement;
return J.isiOS?window["inner"+a]:b["client"+a]}function q(b){var c=a(b)[0],d=document.body,f=a("html")[0],b={top:0,left:0};if(c===d&&T)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=L?d:document.documentElement;
c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+la()-c,left:b.left+da()-d}}function y(){a.each(ja(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function C(a){a=ea(a)?a[0]:a;return a===window||a===document||a===document.body}function B(a){return V(O(a)).getComputedStyle(a,null)}function d(b,c){return!V(O(b)).getComputedStyle?a(b).css(c):
B(b)[c]}function n(b){if(!V(O(b)).getComputedStyle)return a(b).height();var c=B(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function b(b){if(!V(O(b)).getComputedStyle)return a(b).width();var c=B(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function o(b,c){if(!V(O(b)).getComputedStyle)return a(b).outerHeight();var d=B(b);return n(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+
(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function w(c,d){if(!V(O(c)).getComputedStyle)return a(c).outerWidth();var f=B(c);return b(c)+parseFloat(f.paddingLeft)+parseFloat(f.paddingRight)+parseFloat(f.borderLeftWidth)+parseFloat(f.borderRightWidth)+(d?parseFloat(f.marginLeft)+parseFloat(f.marginRight):0)}function f(b){if(!V(O(b)).getComputedStyle)return a(b).innerHeight();var c=B(b);return n(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function k(c){if(!V(O(c)).getComputedStyle)return a(c).innerWidth();
var d=B(c);return b(c)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)}function v(b,c,d,f){function e(){g+=k;g>d?(clearInterval(l),c.each(function(a){for(var c in b[a])this.style[c]=""}),f()):c.each(function(b){var c=h[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var k=Ra,g=0,h=[],j=[];c.each(function(a){var f=b[a];j[a]={};h[a]={};var e=B(c[a]),g;for(g in f)h[a][g]=parseFloat(e[g]),j[a][g]=(parseFloat(f[g])-parseFloat(e[g]))*k/d});e();var l=setInterval(e,k)}function A(a,b,c){var f=[];a.each(function(){var a=
parseFloat(d(this,"opacity"));f.push({opacity:a})});a.css({opacity:0,display:"block"});v(f,a,b,c)}function H(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});v(d,a,b,c)}function z(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(R)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=R;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=
this.style.throbber.width;this.group=e("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=U;for(var d=h(d,this.style.throbber.lines),f=this.style.throbberLine.color,k=this.style.throbberLine.width,g=0,j=d.length;g<j;g++){var l=d[g],m=l.from,o=l.to,l=e("line",c);l.strokeweight=k;l.strokecolor=f;l.fillcolor=f;l.from=m.x+","+m.y;l.to=o.x+","+o.y;m=e("stroke",c);m.opacity=1;l.appendChild(m);this.group.appendChild(l)}this._createPercentArea(c)}function I(b,d){var f=this,
e=a(b);if(e.length){var k=C(e),e=k?a("body"):e,h=O(e[0]);if(h!==window.document&&(e[0]===h||V(h)===e[0]))e=a(h.body);var j=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a",showThrobber:!0},d);this._displayed=!1;this._throbbers=[];this._settings=j;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(j.theme));j.throbber&&a.extend(this._styles.throbber,j.throbber);this._isScreenLock=k;this._$target=e;this._target=1===
this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof j.fadeIn?j.fadeIn:-1;this._fadeOutTime="number"===typeof j.fadeOut?j.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();this._showContent=j.showThrobber||j.message;
for(var e=g.u.str.format(ca,""===j.message?'style="display: none;"':"",j.message),k="https"===document.location.protocol?"return:false":"about:blank",l=0,m=this._$target.length;l<m;l++)this._$content=this._$content.add(a(h.createElement("div")).append(e).addClass($).addClass(j.theme).addClass(ha).css("display","none")),this._$overlay=this._$overlay.add((j.block?a(h.createElement("div")):a()).addClass($).addClass(j.theme).addClass(K).css("display","none")),this._$skin=this._$skin.add((T||L?a(h.createElement("iframe")):
a()).attr("src",k).addClass($).addClass(N).css("display","none"));var o=this._isScreenLock&&M?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",o)});h=j.promises;j=function(){f.hide()};e=a.hasOwnProperty("curCSS")?"pipe":"then";E(h)?(h=a.map(h,function(a){return a&&F(a.promise)?a:null}),0<h.length&&ta(g.async.when(h),e,[j,j])):h&&F(h.promise)&&ta(h,e,[j,j])}}var $="h5-indicator",ha="content",K="overlay",N="skin",U="vml-root",R="h5-vmlstyle",ca='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',
P=500,Ra=13,J=g.env.ua,ea=g.u.obj.isJQueryObject,ja=g.u.obj.argsToArray,aa={throbber:["width","height"],"throbber-line":["width","color"]},S=!!document.createElement("canvas").getContext,G=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),L="CSS1Compat"!==document.compatMode,T=J.isIE&&6>=J.browserVersion,M=!(J.isAndroidDefaultBrowser||
J.isiOS&&5>J.browserVersion||T||L||J.isWindowsPhone),W=null,fa=null,ia=null,ba=null,la=null,da=null,Y=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(f){f=a.camelCase(f);if(f in b.style)return!0;for(var f=f.charAt(0).toUpperCase()+f.slice(1),e=0;e<d;e++)if(c[e]+f in b.style)return!0;return!1}}(),fa=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===
typeof window["inner"+a]?window["inner"+a]:L?b["client"+a]:c["client"+a]}}("Height"),ia=j("Height"),ba=j("Width"),la=m("Top"),da=m("Left"),W=Y("animationName");z.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){for(var b=this.style.throbber.roundTime,c=this.highlightPos,
d=this.group.childNodes,f=0,e=d.length;f<e;f++){var k=d[f];if("textbox"!==k.nodeName){var g=f+1;k.firstChild.opacity=g==c?"1":g==c+1||g==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var h=this;this._runId=setTimeout(function(){h._run.call(h)},Math.floor(b/a))}},_createPercentArea:function(b){var c=e("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);
d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var oa=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,f=this.baseDiv,e=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";f.style.width=
this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.appendChild(d);e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.style.lineHeight=this.style.throbber.height+"px";e.className="throbber-percent";f.appendChild(e);this.positions=h(d.width,this.style.throbber.lines)};oa.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();
this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.style.throbber.lines;if(0!==a){var b=this.canvas,c=b.getContext("2d"),d=this.highlightPos,f=this.positions,e=this.style.throbberLine.color,k=this.style.throbberLine.width,g=this.style.throbber.roundTime;b.width=b.width;for(var h=0,j=f.length;h<j;h++){c.beginPath();c.strokeStyle=e;c.lineWidth=k;var l=h+1;c.globalAlpha=l==d?1:l==d+1||l==d-1?0.75:0.4;var m=f[h],l=m.from,m=m.to;c.moveTo(l.x,l.y);c.lineTo(m.x,m.y);c.stroke()}d==
a?d=0:d++;this.highlightPos=d;if(W)b.className="throbber-canvas";else{var o=this;this._runId=setTimeout(function(){o._run.call(o)},Math.floor(g/a))}}},setPercent:function(a){this.percentDiv.innerHTML=a}};I.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+$).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,f=function(){var c=a(window);b._isScreenLock&&(y(b._$overlay,b._$content),M||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",
b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,k=this._$target.length;e<k;e++){var g=this._$target.eq(e),h=this._$content.eq(e),j=this._$skin.eq(e),l=this._$overlay.eq(e),m=this._settings,o=d(g[0],"position");!this._isScreenLock&&"static"===o&&(g.data("before-position",o),g.data("before-zoom",d(g[0],"zoom")),g.css({position:"relative",zoom:"1"}));var o=O(g[0]),n=null;m.showThrobber&&(n=S?new oa(this._styles,o):G?new z(this._styles,o):null);
n&&(b._throbbers.push(n),b.percent(this._settings.percent),n.show(h.children(".indicator-throbber")[0]));g.append(j).append(l);this._showContent&&g.append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display","block"),f()):A(e,c,f);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!(this._isScreenLock&&M||0===this._$overlay.length))for(var c=0,d=this._$target.length;c<
d;c++){var f=this._$content.eq(c),e=this._$overlay.eq(c);b=this._$target.eq(c);var k=this._$skin.eq(c);if(this._isScreenLock)f=ba(),b=ia();else{e.css("display","none");f.css("display","none");var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(T)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(J.isIE&&"function"===typeof getComputedStyle){var g=V(O(g)).getComputedStyle(g,null),h=parseFloat(g.width)+parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=h-parseInt(h)-1;g=parseFloat(g.height)+
parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);b+=g-parseInt(g)-1}e.css("display","block");f.css("display","block");f=a}e[0].style.width=f+"px";e[0].style.height=b+"px";if(T||L)k[0].style.width=f+"px",k[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var g=this._$target.eq(c),h=this._$content.eq(c);if(this._isScreenLock){var j=fa();M?h.css("top",(j-o(h[0]))/2+"px"):h.css("top",la()+j/2-o(h[0])/2+"px")}else h.css("top",g.scrollTop()+(f(g[0])-o(h[0]))/
2);var j=k(h[0])-b(h[0]),l=0;h.children().each(function(){var b=a(this);if("none"===d(b[0],"display"))return!0;l+=w(this,!0)});h.css("width",l+j);h.css("left",g.scrollLeft()+(k(g[0])-w(h[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());for(var f=a(d),d=function(){var c=a(window);f.remove();b._isScreenLock||
b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)},e=0,g=this._throbbers.length;e<g;e++)this._throbbers[e].hide();
0>c?(f.css("display","none"),d()):H(f,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!u(a))return this;if(!this._redrawable)return this._lastMessage=a,this;(this._showContent=this._settings.showThrobber||!!a)?this._$target.append(this._$content):this._$content.remove();this._$content.children(".indicator-message").css("display",
"inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);
this._redrawable=!1;M||T||L?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};g.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new I(b.target,b):new I(b,c)},isInView:function(b,c){var d,f,e,g,k=a(b);if(typeof c===ka)f=l("Height"),g=l("Width"),d=la(),e=da();else{g=a(c);if(0===g.find(k).length)return;e=q(g);d=e.top+parseInt(g.css("border-top-width"));e=e.left+parseInt(g.css("border-left-width"));f=g.innerHeight();g=g.innerWidth()}f=d+f;g=e+g;var h=q(k),j=h.top,
h=h.left,m=j+k.outerHeight(),k=h+k.outerWidth();return(d<=j&&j<f||d<m&&m<=f)&&(e<=h&&h<g||e<k&&k<=g)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,P))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,P)}})})();(function(){function c(){var b=a.mobile.activePage,b=b&&b[0]&&b[0].id;return u(b)&&0<b.length?b:null}function e(){var b=c();null!==b&&a(function(){l.addCSS(b);l.bindController(b)})}function h(a,b){for(var c in y)for(var d=
y[c],e=a===c,g=0,h=d.length;g<h;g++){var j=d[g];if(e)j[(b?"enable":"disable")+"Listeners"]()}for(c in C){d=C[c];e=a===c;g=0;for(h=d.length;g<h;g++)if(j=d[g],e)j[(b?"enable":"disable")+"Listeners"]()}}function j(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,g=0;g<e;g++){if(null==d[g])return 1;var h=parseInt(c[g],10),j=parseInt(d[g],10);if(h!==j)return h<j?-1:1}return null!=d[e]?-1:0}var D,l=null,q={},y={},C={},B={},d={},
n=!1,b=!1,o=!1;g.u.obj.ns("h5.ui.jqm");g.ui.jqm.dataPrefix="h5";var w={__name:"JQMController",__ready:function(){var b=this,d=c();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){b.loadScript(this.id)});var e=this.$find("#"+d);e.one("h5controllerready.emulatepageshow",function(){o&&e[0]===a.mobile.activePage[0]&&e.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){D||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){D&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});b=!0;var c=c.event.target.id,d=y[c],e=C[c];if(d){for(var g=0,h=d.length;g<h;g++)d[g].dispose();y[c]=[]}if(e){g=0;for(h=e.length;g<h;g++)e[g].dispose();C[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);h(a,!0)},"{rootElement} pagehide":function(c){b||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});b=!1;c=c.event.target.id;h(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(b){var c=!1,d=a(b.event.target),e=b.evArg?b.evArg.prevPage:a("");if(b=y[d[0].id])for(var g=0,h=b.length;g<h;g++)if(!b[g].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});c=!0;break}c||d.trigger("h5jqmpageshow",{prevPage:e})},
"{rootElement} h5controllerbound":function(b){b=b.evArg;if(this!==b){var d=c();null!==d&&-1===a.inArray(b,y[d])&&(C[d]||(C[d]=[]),C[d].push(b))}},"{rootElement} h5controllerunbound":function(b){var d=b.evArg,b=c();null!==b&&(d=a.inArray(d,C[b]),-1!==d&&C[b].splice(d,1))},loadScript:function(b){var b=a("#"+b),c=a.trim(b.data(this.getDataAttribute("script")));if(0!==c.length)return c=a.map(c.split(","),function(b){return a.trim(b)}),b=!0==b.data(this.getDataAttribute("async")),g.u.loadScript(c,{async:b})},
getDataAttribute:function(a){var b=g.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=q[a],c=B[a];if(b&&0!==b.length){y[a]||(y[a]=[]);for(var d=y[a],e=0,h=b.length;e<h;e++){for(var j=b[e],l=!1,m=0,o=d.length;m<o;m++){var n=d[m];if(n&&n.__name===j.__name){l=!0;break}}l||y[a].push(g.core.controller("#"+a,j,c[e]))}}},addCSS:function(b){if(b=d[b])for(var c=document.getElementsByTagName("head")[0],e=c.getElementsByTagName("link"),g=e.length,h=0,j=b.length;h<
j;h++){for(var l=a.mobile.path.parseUrl(b[h]).filename,m=!1,o=0;o<g;o++)if(a.mobile.path.parseUrl(e[o].href).filename===l){m=!0;break}m||(l=document.createElement("link"),l.type="text/css",l.rel="stylesheet",l.href=b[h],c.appendChild(l))}},removeCSS:function(b){var e=d[b];if(e&&(b=c(),null!==b)){var g=d[b];a("link").filter(function(){var b=a(this).attr("href");return-1!==a.inArray(b,e)&&-1===a.inArray(b,g)}).remove()}}};g.u.obj.expose("h5.ui.jqm.manager",{init:function(){n||(n=!0,D=0<=j(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){o=!0}),a(function(){l=ia.controllerInternal("body",w,null,{managed:!1});e()}))},define:function(b,g,h,j){u(b)||m(12E3,"id");null!=g&&!u(g)&&!E(g)&&m(12E3,"cssSrc");null!=h&&((u(h)||E(h))&&m(12001),(!a.isPlainObject(h)||!("__name"in h))&&m(12E3,"controllerDefObject"),null!=j&&!a.isPlainObject(j)&&m(12E3,"initParam"));d[b]||(d[b]=[]);q[b]||(q[b]=[]);B[b]||(B[b]=[]);a.merge(d[b],a.map(a.makeArray(g),function(c){return a.inArray(c,d[b])!==-1?null:c}));h&&-1===
a.inArray(h,q[b])&&(q[b].push(h),B[b].push(j));n&&null!==c()?e():this.init()}})})();(function(){var c={required:"{displayName}は必須項目です",min:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.min}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以上の":"より大きい")},max:function(a){return g.u.str.format("{displayName}は{violation[0].ruleValue.max}{1}数値を入力してください。",a,a.violation[0].ruleValue.inclusive?"以下の":"未満の")},pattern:"{displayName}は正規表現{violation[0].ruleValue.regexp}を満たす文字列を入力してください。",
digits:"{displayName}は整数部分{violation[0].ruleValue.integer}桁、小数部分{fruction}桁以下の数値を入力してください。",size:function(a){var c="",j="",m=a.violation[0].ruleValue.min,l=a.violation[0].ruleValue.max;null!=m&&(j=g.u.str.format("{0}以上",m));null!=l&&(c=g.u.str.format("{0}以下",l));return g.u.str.format("{displayName}は{1}{2}の長さでなければいけません。",a,j,c)},future:"{displayName}は現在時刻より未来の時刻を入力してください。",past:"{displayName}は現在時刻より過去の時刻を入力してください。",assertNull:"{displayName}はnullでなければなりません。",assertNotNull:"{displayName}はnullでない値を設定してください。",
assertFalse:"{displayName}はfalseとなる値を入力してください。",assertTrue:"{displayName}はtrueとなる値を入力してください。",customFunc:"{displayName}は条件を満たしません"};Aa={createValidateErrorMessage:function(e,h,j){var m=j&&j.message,j=a.extend({},h,{displayName:j&&j.displayName||e});if(u(m))return g.u.str.format(m,j);if(F(m))return m(j);var m=h.violation[0].ruleName,l=c[m];return l?F(l)?l(j):g.u.str.format(l,j):g.u.str.format("{0}:{1}はルール{2}を満たしません",e,h.value,m)}};g.core.expose({__name:"h5.ui.validation.MessageOutputController",_container:null,
_wrapper:null,_setting:{},setContainer:function(a){this._container=a},setWrapper:function(a){this._wrapper=a},addMessageSetting:function(a){if(this._setting)for(var c in a)this._setting[c]=a[c];else this._setting=a},clearMessage:function(){this._container&&a(this._container).empty()},appendMessage:function(c){var h=a(this._container);if(h.length){var j=this._wrapper;j?g.u.str.startsWith(a.trim(j),"<")?(msgElement=a(j),msgElement.text(c)):msgElement=a(document.createElement(j)).html(c):msgElement=
document.createTextNode(c);h.append(msgElement)}},getMessageByValidationResult:function(a,c){var g=a.invalidReason[c];return!g?null:Aa.createValidateErrorMessage(c,g,this._setting[c])},appendMessageByValidationResult:function(c,g){for(var j=c.invalidProperties,g=u(g)?[g]:g,m=0,l=j.length;m<l;m++){var q=j[m];g&&-1===a.inArray(q,g)||this.appendMessage(this.getMessageByValidationResult(c,q))}null===c.isAllValid&&c.addEventListener("validate",this.own(function(c){(!c.isValid&&!g||-1!==a.inArray(c.name,
g))&&this.appendMessage(Aa.createValidateErrorMessage(c.name,c.target.invalidReason[c.name],this._setting[c.name]))}))}})})();(function(){g.core.expose({__name:"h5.ui.validation.Style",_setting:{},_styleAppliedElements:{},_setSetting:function(a){this._setting=a},_onValidate:function(a){for(var e=a.properties,g=0,j=e.length;g<j;g++){var m=e[g];this._setStyle(this.parentController._getElementByName(m),m,a)}},_onFocus:function(a,e,g){this._setStyle(a,e,g)},_onKeyup:function(a,e,g){this._setStyle(a,e,
g)},reset:function(){for(var c in this._styleAppliedElements){var e=this._styleAppliedElements[c],g=a.extend({},this._setting,this._setting.property&&this._setting.property[c]);this._setValidateState(null,e,g,c)}},_setStyle:function(c,e,g){var j=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!j.off){var m=j.replaceElement;if(c=F(m)?m(c):m||c)-1!==a.inArray(e,g.validatingProperties)?(this._setValidateState("validating",c,j),g.addEventListener("validate",this.own(function(a){a.name===
e&&this._setValidateState(a.isValid?"success":"error",c,j,e)}))):this._setValidateState(-1===a.inArray(e,g.invalidProperties)?"success":"error",c,j,e)}},_setValidateState:function(c,e,g,j){var m=g.errorClassName,l=g.successClassName,q=g.validatingClassName;a(e).removeClass(m).removeClass(l).removeClass(q);c&&(c=g[c+"ClassName"],a(e).addClass(c),this._styleAppliedElements[j]=e)}})})();(function(){g.core.expose({__name:"h5.ui.validation.Composition",_messageOutputController:g.ui.validation.MessageOutputController,
_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._messageOutputController.clearMessage();this._messageOutputController.appendMessageByValidationResult(a)},reset:function(){this._messageOutputController.clearMessage()},_setChildSetting:function(){var a=this._setting;this._messageOutputController.setContainer(a.container);this._messageOutputController.setWrapper(a.wrapper);var e=
a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.ErrorBaloon",_executedOnValidate:!1,_messageOutputController:g.ui.validation.MessageOutputController,_setting:{},_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},
_onValidate:function(){this._executedOnValidate=!0},_onFocus:function(a,e,g){this._setErrorBaloon(a,e,g,"focus")},_onBlur:function(a,e,g){this._setErrorBaloon(a,e,g,"blur")},_onKeyup:function(a,e,g){this._setErrorBaloon(a,e,g,"keyup")},reset:function(){this._hideBaloon();this._executedOnValidate=!1},_setErrorBaloon:function(c,e,g,j){if(this._executedOnValidate){var m=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!m.off){var l=m.replaceElement,q=F(l)?l(c):l||c;if(q)if("blur"===
j||c!==document.activeElement&&!a(document.activeElement).closest(c).length)this._hideBaloon();else{var y=m.placement||"top",u=m.container||null;-1!==a.inArray(e,g.validatingProperties)?g.addEventListener("validate",this.own(function(a){c===document.activeElement&&(a.isValid?this._hideBaloon():this._showBaloon(q,y,u,this._messageOutputController.getMessageByValidationResult(g,a.name)))})):!g.invalidReason||!g.invalidReason[e]?this._hideBaloon():this._showBaloon(q,y,u,this._messageOutputController.getMessageByValidationResult(g,
e))}}}},_showBaloon:function(a,e,h,j){this._hideBaloon();if(this._baloonController){var m=this._baloonController.create(j);m.show({target:a,direction:e});this._currentBaloon=m;this._currentBaloonTarget=a}else{var l=g.core.controller(this.rootElement,g.ui.components.BaloonController);this.manageChild(l);l.readyPromise.done(this.own(function(){this._baloonController=l;this._showBaloon(a,e,h,j)}))}},_hideBaloon:function(){this._currentBaloon&&(this._currentBaloon.dispose(),this._currentBaloon=null);
this._currentBaloonTarget=null},_setChildSetting:function(){var a=this._setting,e=a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){var c={__name:"h5.ui.validation.BootstrapErrorBaloon",_hideBaloon:function(){a(this._currentBaloonTarget).tooltip("hide")},_showBaloon:function(c,g,j,m){a(c).attr({"data-placement":g,"data-container":j,
"data-original-title":m,"data-animation":!1}).tooltip({trigger:"manual"});a(c).tooltip("show");this._currentBaloonTarget=c}},c=a.extend({},g.ui.validation.ErrorBaloon,c);g.core.expose(c)})();(function(){g.core.expose({__name:"h5.ui.validation.Message",_executedOnValidate:!1,_messageElementMap:{},_messageOutputController:g.ui.validation.MessageOutputController,_setSetting:function(a){this._setting=a;this.isInit?this._setChildSetting():this.initPromise.done(this.own(this._setChildSetting))},_onValidate:function(a){this._executedOnValidate=
!0;for(var e=a.validProperties,g=0,j=e.length;g<j;g++){var m=e[g];this._setMessage(this.parentController._getElementByName(m),m,a)}},_onFocus:function(a,e,g){this._setMessage(a,e,g,"focus")},_onBlur:function(a,e,g){this._setMessage(a,e,g,"blur")},reset:function(){for(var a in this._messageElementMap){var e=this._messageElementMap[name];e&&e.remove()}this._executedOnValidate=!1},_setMessage:function(c,e,g,j){if(this._executedOnValidate){var m=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);
if(!m.off)if("blur"===j)this._removeMessage(e);else if(-1!==a.inArray(e,g.validatingProperties))this._removeMessage(e),g.addEventListener("validate",this.own(function(a){a.name===e&&!a.isValid&&("focus"!==j||document.activeElement===c)&&this._setMessage(c,e,g,j)}));else{this._removeMessage(e);var l=m.appendMessage,m=m.replaceElement,m=F(m)?m(c):m||c,q=this._messageElementMap[e];q||(q=a('<span class="message">'),this._messageElementMap[e]=q);q.html(this._messageOutputController.getMessageByValidationResult(g,
e));l?l(q[0],m,e):m&&a(m).after(q)}}},_removeMessage:function(a){this._messageElementMap[a]&&this._messageElementMap[a].remove()},_setChildSetting:function(){var a=this._setting,e=a.property,g={},j;for(j in e)g[j]={displayName:e[j].displayName||a.displayName,message:e[j].message||a.message,formatter:e[j].formatter||a.formatter};this._messageOutputController.addMessageSetting(g)}})})();(function(){g.core.expose({__name:"h5.ui.validation.AsyncIndicator",_indicators:{},_setSetting:function(a){this._setting=
a},_onValidate:function(c){for(var e=c.validatingProperties,g=c.properties,j=0,m=g.length;j<m;j++){var l=g[j];-1!==a.inArray(l,e)?this._showIndicator(this.parentController._getElementByName(l),l,c):this._hideIndicator(l)}},_onFocus:function(c,e,g){g=g.validatingProperties;a.inArray(e,g)?(c=this.parentController._getElementByName(e),this._showIndicator(c,e,g[i])):this._hideIndicator(e)},_onKeyup:function(c,e,g){-1!==a.inArray(e,g.validatingProperties)&&this._showIndicator(c,e,g)},reset:function(){for(var a in this._indicators)this._hideIndicator(a);
this._executedOnValidate=!1},_showIndicator:function(c,e,h){var j=a.extend({},this._setting,this._setting.property&&this._setting.property[e]);if(!j.off&&(j=j.replaceElement,c=F(j)?j(c):j||c))this._indicators[e]=this._indicators[e]||g.ui.indicator({target:c,block:!1}),this._indicators[e].show(),h.addEventListener("validate",this.own(function(a){e===a.name&&this._hideIndicator(a.name)})),h.addEventListener("abort",this.own(function(){this._hideIndicator(e)}))},_hideIndicator:function(a){this._indicators[a]&&
this._indicators[a].hide()}})})();(function(){var c={style:g.ui.validation.Style,composition:g.ui.validation.Composition,baloon:g.ui.validation.ErrorBaloon,bsBaloon:g.ui.validation.BootstrapErrorBaloon,message:g.ui.validation.Message,asyncIndicator:g.ui.validation.AsyncIndicator},e=function(b){if(null!=a(b).data("required"))return!0},h=function(b){if(null!=a(b).data("assertFalse"))return!0},j=function(b){if(null!=a(b).data("assertTrue"))return!0},m=function(b){if(null!=a(b).data("nul"))return!0},
l=function(b){if(null!=a(b).data("notNull"))return!0},q=function(b){b=a(b).data("max");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},u=function(b){b=a(b).data("min");if(null!=b)return"number"===typeof b?b:E(b)?[parseFloat(b[0]),"true"===a.trim(b[1])]:parseFloat(b)},C=function(b){b=a(b).data("future");if(null!=b)return new Date(b)},B=function(b){b=a(b).data("past");if(null!=b)return new Date(b)},d=function(b){b=a(b).data("pattern");if(null!=b)return RegExp(b)},
n=function(b){b=a(b).data("size");if(null!=b){if(E(b)){for(var c=0,d=b.length;c<d;c++)b[c]=parseInt(b[c]);return b}return parseInt(b)}};g.core.expose({__name:"h5.ui.FormController",_config:{},_bindedForm:null,_ruleCreators:[],_plugins:[],_validationLogic:g.validation.FormValidationLogic,_waitingValidationResultMap:{},_waitingAllValidationResult:null,_setting:{},_pluginSetting:{},setSetting:function(a){this._setting=a;var a=this._plugins,c;for(c in a){var d=a[c];d._setSetting&&d._setSetting(this._margePluginSettings(c))}},
_margePluginSettings:function(b){this._pluginSetting;var c=this._setting,d=c.output,c=c.property,d=a.extend({},d&&d[b]);d.property={};for(var e in c){var k=a.extend({},c[e]);a.extend(k,k[b]);var h=g.u.obj.getByPath("output."+b,k);delete k.output;d.property[e]=a.extend({},k,h)}return d},__construct:function(){this._addRuleCreator("required",e);this._addRuleCreator("assertFalse",h);this._addRuleCreator("assertTrue",j);this._addRuleCreator("nul",m);this._addRuleCreator("notNull",l);this._addRuleCreator("max",
q);this._addRuleCreator("min",u);this._addRuleCreator("future",C);this._addRuleCreator("past",B);this._addRuleCreator("pattern",d);this._addRuleCreator("size",n)},__init:function(){"FORM"===this.rootElement.tagName.toUpperCase()&&(this._bindedForm=this.rootElement,a(this._bindedForm).prop("novalidate",!0));var b={};a(this._getElements()).each(this.ownWithOrg(function(a){var c=a.getAttribute("name");if(c!=null){var d={};b[c]=d;for(var c=0,e=this._ruleCreators.length;c<e;c++){var g=this._ruleCreators[c].key,
h=this._ruleCreators[c].func,h=h(a);h!==void 0&&(d[g]=h)}}}));this.addRule(b);if(this._bindedForm)this.on(this._bindedForm,"submit",this._submitHandler)},addOutput:function(b){if(this.isInit)for(var b=a.isArray(b)?b:[b],d=0,e=b.length;d<e;d++){var f=b[d],g=c[f];g?this._addOutputPlugin(f,g):this.log.warn('プラグイン"{0}"は存在しません',f)}else this.initPromise.done(this.own(function(){this.addOutput(b)}))},addRule:function(a){this._validationLogic.addRule(a)},removeRule:function(a){this._validationLogic.removeRule(a);
this.validate(a)},enableRule:function(a){this._validationLogic.enableRule(a)},disableRule:function(a){this._validationLogic.disableRule(a)},getValue:function(b){var b=b&&(!E(b)?[b]:b),c=a(this._getElements()),d=a(this._getInputGroupElements()),e=this._setting&&this._setting.property||{},g={},h=[],j=this.rootElement;c.each(function(){var c=this.name;h.push(c);var l=g;if(d.find(this).length)var m=a(this).closest("[data-h5-input-group-container]").data("h5-input-group-container");if(m){h.push(m);if(b&&
-1===a.inArray(c,b)&&-1===a.inArray(m,b))return;g[m]=g[m]||{};l=g[m]}else if(b&&-1===a.inArray(c,b))return;if("file"===this.type){var m=this.files,n=m.length;if(n){l[c]=l[c]||[];for(var o=0;o<n;o++)l[c].push(m[o])}}else if(c&&!(("radio"===this.type||"checkbox"===this.type)&&!1===this.checked))n=(m=e[c]&&e[c].valueFunc)?m(j,c):a(this).val(),m&&void 0===n||null==n||(e[c]&&e[c].isArray&&(n=K(n)),void 0!==l[c]?(a.isArray(l[c])||(l[c]=[l[c]]),a.isArray(n)?Array.prototype.push.apply(l[c],n):l[c].push(n)):
l[c]=n)});for(var l in e)if((!b||-1!==a.inArray(l,b))&&-1===a.inArray(l,h))c=(c=e[l]&&e[l].valueFunc)&&c(j,l),void 0!==c&&(g[l]=c);return g},setValue:function(b){var c=a(this._getElements()),d={},e={},g;for(g in b)if(a.isPlainObject(b[g]))for(var h in b[g])e[h]=b[g][h];else e[g]=b[g];b=e;c.each(function(){var c=this.name;if(c){var e=b[c];if("radio"===this.type||"checkbox"===this.type)a.isArray(e)&&(d[c]=d[c]?d[c]+1:0,e=e[d[c]]),a(this).prop("checked",a(this).val()===e);else if(a(this).is("select[multiple]")){if(a(this).val([]),
a.isArray(e)&&(d[c]=d[c]||0,e=e.slice(d[c])),null!=e)for(var f=[],g=0,k=e.length;g<k;g++){f.push(e[g]);a(this).val(f);d[c]++;var h=a(this).val(),h=a.isArray(h)?h:[h];if(h.length<f.length){d[c]--;break}}}else a.isArray(e)&&(d[c]=d[c]||0,e=e[d[c]++]),a(this).val(e)}})},clearValue:function(){a(this._getElements()).each(function(){"radio"===this.type||"checkbox"===this.type?a(this).prop("checked",!1):a(this).val(null)})},resetValue:function(){this._bindedForm&&this._bindedForm.reset()},resetValidation:function(){this._waitingValidationResultMap=
{};var a=this._plugins,c;for(c in a)this._resetPlugin(c,a[c])},validate:function(a){a=this._validate(a);this._callPluginValidateEvent("_onValidate",a);return a},getOutput:function(a){return this._plugins[a]},"{rootElement} focusin":function(a){this._pluginElementEventHandler(a,"_onFocus")},"{rootElement} focusout":function(a){this._pluginElementEventHandler(a,"_onBlur")},"{rootElement} keyup":function(a){this._pluginElementEventHandler(a,"_onKeyup")},"{rootElement} change":function(a){this._pluginElementEventHandler(a,
"_onChange")},"{rootElement} click":function(a){this._pluginElementEventHandler(a,"_onClick")},_getElementByName:function(b){var c=this._setting.property&&this._setting.property[b]&&this._setting.property[b].srcElement;return c||(c=a(this._getElements()).filter('[name="'+b+'"]')[0])?c:(b=a(this._getInputGroupElements()).filter('[data-h5-input-group-container="'+b+'"]')[0])?b:null},_getElements:function(){var b=this.$find("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]');
if(!this._bindedForm)return b;var c=a(this._bindedForm).attr("id");return a("input,select,textarea").not('[type="submit"],[type="reset"],[type="image"]').filter(function(){var d=a(this),e=d.attr("form");return e&&e===c||!e&&-1!==b.index(d)}).toArray()},_getInputGroupElements:function(){var b=a("[data-h5-input-group-container]");return this.$find("[data-h5-input-group-container]").filter(function(){var c=a(this),d=c.attr("form");return d&&d===formId||!d&&-1!==b.index(c)}).toArray()},_addRuleCreator:function(a,
c){this._ruleCreators.push({key:a,func:c})},_resetPlugin:function(a,c){c.reset&&c.reset.call(c)},_addOutputPlugin:function(a,c){if(this._plugins[a])this.log.warn('プラグイン"{0}"は登録済みです。',a);else{var d=g.core.controller(this._bindedForm||this.rootElement,c);d._setSetting&&d._setSetting(this._margePluginSettings(a));this.manageChild(d);this._plugins[a]=d}},_validate:function(a){var c=this.getValue(a),d=this._validationLogic.validate(c,a);this.log.debug("-----------------------------------------");this.log.debug("・validateするデータ");
this.log.debug(c);this.log.debug("・validate対象のプロパティ:"+a);this.log.debug("・validate結果");this.log.debug(d);this.log.debug(d.isAsync?"非同期":"同期");this.log.debug("-----------------------------------------");if(d.isAsync){for(var a=d.validatingProperties,c=0,e=a.length;c<e;c++)this._waitingValidationResultMap[a[c]]=d;d.addEventListener("validate",this.own(function(a){delete this._waitingValidationResultMap[a.name]}))}return d},_createPluginElementEventArgs:function(){},_pluginElementEventHandler:function(b,
c){var d=b.event.target;if(this._isFormControls(d)){var e=d.name;if(e){var g;a(this._getInputGroupElements()).find(d).length&&(g=a(d).closest("[data-h5-input-group-container]").data("h5-input-group-container"));var h=this._validate(g||e);this._callPluginElementEvent(c,d,e,h);g&&(d=this._getElementByName(g),this._callPluginElementEvent(c,d,g,h))}}},_callPluginValidateEvent:function(a,c){var d=this._plugins,e;for(e in d){var g=d[e];g[a]&&g[a].call(g,c)}},_callPluginElementEvent:function(a,c,d,e){var g=
this._plugins,h;for(h in g){var j=g[h];if(j[a])j[a](c,d,e)}},_submitHandler:function(a,c){a.event.preventDefault();var d=this.validate();d.isAsync?d.addEventListener("validateComplete",function(){this.isAllValid&&c[0].submit()}):d.isAllValid&&c[0].submit()},_isFormControls:function(b){return-1!==a(this._getElements()).index(b)}})})();(function(){function c(){j||(j=navigator.geolocation);return j}function e(a,c){this.oblateness=a;this.semiMajorAxis=c}function h(){}var j=null,u=g.env.ua;e.prototype.getOblateness=
function(){return this.oblateness};e.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var l=new e(298.257222,6378137),q=new e(299.152813,6377397.155),y=Math.PI/180;a.extend(h.prototype,{isSupported:u.isIE&&9<=u.browserVersion?!0:!!c(),getCurrentPosition:function(a){var e=g.async.deferred();c().getCurrentPosition(function(a){e.resolve(a)},function(a){e.reject(ea(2002,null,a))},a);return e.promise()},watchPosition:function(a){function e(){}var d=g.async.deferred(),h=c().watchPosition(function(a){d.notify(a)},
function(a){c().clearWatch(h);d.reject(ea(2002,null,a))},a);e.prototype.unwatch=function(){c().clearWatch(h);d.resolve()};return d.promise(new e)},getDistance:function(a,c,d,g,b){(!isFinite(a)||!isFinite(c)||!isFinite(d)||!isFinite(g))&&m(2E3);var h=b?b:l;h instanceof e||m(2001);var b=h.getSemiMajorAxis(),j=h.getOblateness(),a=a*y,c=c*y,d=d*y,h=g*y,g=(a+d)/2,j=Math.sqrt(2*j-1)/j,j=Math.pow(j,2),f=Math.sqrt(1-j*Math.pow(Math.sin(g),2)),j=b*(1-j)/Math.pow(f,3),b=b/f,c=c-h;return Math.sqrt(Math.pow(j*
(a-d),2)+Math.pow(b*Math.cos(g)*c,2))},GS_GRS80:l,GS_BESSEL:q});g.u.obj.expose("h5.api",{geo:new h})})();(function(){function c(a){if(a){var b=a.deferred;(xa(b)||Qa(b)||!a.result)&&m(n)}}function e(c,d,e){if(a.isPlainObject(c))for(var g in c){var f=a.trim(g).replace(/ +/g," ").split(" "),h=[];""===f[0]?m(o):1===f.length?(h.push(f[0]),h.push("="),h.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(f[1])?3===f.length&&/^like$/i.test(f[1])?(h.push(f[0]),h.push(f[1]),h.push("?"),h.push("ESCAPE"),h.push('"'+
f[2]+'"')):(h.push(f[0]),h.push(f[1]),h.push("?")):m(b);d.push(h.join(" "));e.push(c[g])}}function h(){}function j(){this._multiple=!1}function D(a){this._db=a;this._df=w();this._tx=null;this._tasks=[];this._queue=[]}function l(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._columns=E(c)?c.join(", "):"*";this._orderBy=this._where=null}function q(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c?K(c):[];this._df=
w();this._multiple=!0}function y(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._values=c;this._where=null}function C(a,b){this._statements=[];this._parameters=[];this._executor=a;this._tableName=b;this._where=null}function B(a,b,c){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(b);this._parameters.push(c||[])}function d(a){this._db=a}var n=3E3,b=3003,o=3011,w=g.async.deferred,f=g.u.str.format;a.extend(j.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});
a.extend(D.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof j||m(3009);var b=this._getRecentTask();(!b||b.result)&&this._queue.push(a);return this},_execute:function(a){function b(){if(0===f.length){var c=a(g);d._setResult.apply(d,[c]);e.notify(c,d)}else{for(var h=f.shift(),
j=h._statements,l=h._parameters,m=w().resolve().promise(),c=[],n=0,o=j.length;n<o;n++)(function(a,b){m=ga(m,function(){var e=w();d._tx.executeSql(a,b,function(a,b){c.push(h._onComplete(b));e.resolve()});return e.promise()})})(j[n],l[n]);ga(m,function(){g.push(h._multiple?c:c[0]);b()})}}var d=this,e=this._df,f=this._queue,g=[];try{c(this._getRecentTask());this._addTask(e);for(var h=0,j=f.length;h<j;h++)f[h]._buildStatementAndParameters();this._runTransaction()?b():this._db.transaction(function(a){d._tx=
a;b()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(ea(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(l){e.reject(l)}this._df=w();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});l.prototype=new j;a.extend(l.prototype,{where:function(b){!a.isPlainObject(b)&&!u(b)&&
m(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!u(b)&&m(3004,["Select","orderBy"]);this._orderBy=K(b);return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=f("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var d=[];e(c,d,this._parameters);b+=" WHERE "+d.join(" AND ")}else u(c)&&(b+=" WHERE "+c);E(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=
[this._parameters]},_onComplete:function(a){return a.rows}});q.prototype=new j;a.extend(q.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,d=this._parameters;if(0===b.length)c.push(f("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else for(var e=0,g=b.length;e<g;e++){var h=b[e];if(null==h)c.push(f("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(a.isPlainObject(h)){var j=[],l=[],m=[],n;for(n in h)j.push("?"),l.push(n),m.push(h[n]);
c.push(f("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,l.join(", "),j.join(", ")));d.push(m)}}},_onComplete:function(a){return a.insertId}});y.prototype=new j;a.extend(y.prototype,{where:function(b){!a.isPlainObject(b)&&!u(b)&&m(3004,["Update","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=this._values,d=[],g;for(g in b)d.push(g+" = ?"),this._parameters.push(b[g]);b=f("UPDATE {0} SET {1}",this._tableName,d.join(", "));a.isPlainObject(c)?
(g=[],e(c,g,this._parameters),b+=" WHERE "+g.join(" AND ")):u(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});C.prototype=new j;a.extend(C.prototype,{where:function(b){!a.isPlainObject(b)&&!u(b)&&m(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=f("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var d=[];e(c,d,this._parameters);b+=" WHERE "+
d.join(" AND ")}else u(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});B.prototype=new j;a.extend(B.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});a.extend(d.prototype,{select:function(a,b,c){u(a)||m(3001,"select");!E(b)&&"*"!==b&&m(3005,"select");return new l(this.transaction(c),a,b)},insert:function(b,c,d){u(b)||m(3001,"insert");null!=c&&!E(c)&&!a.isPlainObject(c)&&m(3006,
"insert");return new q(this.transaction(d),b,c)},update:function(b,c,d){u(b)||m(3001,"update");a.isPlainObject(c)||m(3006,"update");return new y(this.transaction(d),b,c)},del:function(a,b){u(a)||m(3001,"del");return new C(this.transaction(b),a)},sql:function(a,b,c){u(a)||m(3007,"sql");null!=b&&!E(b)&&m(3008,"sql");return new B(this.transaction(c),a,b)},transaction:function(a){void 0!=a&&!(a instanceof D)&&m(3002,"transaction");return a?a:new D(this._db)}});a.extend(h.prototype,{isSupported:!!window.openDatabase,
open:function(a,b,c,e){if(this.isSupported)return a=openDatabase(a,b,c,e),new d(a)}});g.u.obj.expose("h5.api",{sqldb:new h})})();(function(){function c(a){this._storage=a}a.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){a=this._storage.getItem(a);return null===a?null:g.u.obj.deserialize(a)},setItem:function(a,c){this._storage.setItem(a,g.u.obj.serialize(c))},removeItem:function(a){this._storage.removeItem(a)},
clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,g=0,m=c.length;g<m;g++){var l=c.key(g);a(g,l,this.getItem(l))}}});g.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})();(function(){var c,e,h,j;function D(a){for(var a=
g.core.controllerManager.getControllers(a,{deep:!0}),b=0,c=a.length;b<c;b++)Ga(a[b])||a[b].dispose()}function l(b,c){var d=a(b).filter(c),e=a(b).find(c);if(0===d.length)return e;if(0===e.length)return d;d=a.makeArray(d);e=a.makeArray(e);return a(d.concat(e))}function q(b){b=a(b).closest("["+L+"],["+T+"]");return b.length?b.get(0):null}function y(b){b=a(b).closest("["+W+"],["+M+"]");return b.length?b.get(0):null}function C(a,b){if(a===b)return!0;var c=y(a),d=b?y(b):null;return c!==d?!1:q(a)===b}function B(b,
c,e){var f=b?b:document.body,b=a(f);if(0!==b.length){1!==b.length&&m(qa);if(!ra){var h=l(f,"["+W+"]");0===h.length&&(h=l(f,"main"),0===h.length&&f===document.body&&(h=a(f)),0<h.length&&h.eq(0).attr(W,W))}if(b.is("["+M+"]"))ga(f);else if(b.is("["+W+"]"))ga(f,!0);else{var j=a(f).is("["+L+"],["+T+"]")&&!d(f),k=j?g.async.deferred():null,s=a(f).is("["+L+"],["+T+"]")?f:q(f),u=!1;l(f,"["+S+"]").each(function(){for(var b=this.getAttribute(S).split(","),g=0,h=b.length;g<h;g++){var p=a.trim(b[g]);if(""===p||
c&&p!==c)return!0;if(!d(this,p)){if(!C(this,s))return!0;var l=!1;j&&!u&&this===f&&(l=u=!0);n(this,p);p=o(p,this,l?e:null);l&&p.done(function(a){k.resolve(a)})}}});b.find("["+W+"],["+M+"]").each(function(){if(C(this,s))return!0;var b=a(this);b.is("["+W+"]")?ga(this,!0):b.is("["+M+"]")&&ga(this)});if(j)return k.promise()}}}function d(b,c){var d=a(b).attr(G);if(!d)return!1;d=d.split(",");if(!c&&0<d.length)return!0;for(var e=0;e<d.length;e++)if(a.trim(d[e])===c)return!0;return!1}function n(b,c){var d=
a(b).attr(G)||"";d&&(d+=",");a(b).attr(G,d+c)}function b(b,c,e){var f=b?b:document.body,h=g.async.deferred(),b=!1,j=null,k=a(f).find(">["+L+"]");0<k.length&&(j=k.eq(0),d(j)||(b=!0,j.is("["+S+"]")||(n(j,Xa.__name),j=g.core.controller(j,Xa,e),h.resolve(j))));b||(f=a(f).children().eq(0).filter("["+T+"]"),0<f.length&&!d(f)&&(b=!0,f.attr(L,L),k=f,f.is("["+S+"]")||(n(f,Xa.__name),j=g.core.controller(f,Xa,e),h.resolve(j))));b||m(X);c=B(k.get(0),c,e);Qa(h)||c.done(function(a){h.resolve(a)});return h.promise()}
function o(a,b,c){var d=g.async.deferred();g.res.get(a).then(function(a){a=g.core.controller(b,a,c);d.resolve(a)});return d.promise()}function w(a,b){this.type=a;this.data=b}function f(b,c){this.type=b;this._targetWindow=c;this._closed=!1;this._subscribers=[];var d=this;this._recv=function(a){d._receiveMessage(a.originalEvent)};a(window).on("message",this._recv)}function k(a,b){var c=Sa[a];c||(c=new f(a,b),Sa[a]=c);return c}function v(){this._recvChannel=new f(oa,window.opener);this._recvChannel.subscribe(this._receive,
this);this._sendChannel=new f(s,window.opener)}function A(a){this.targetWindow=a;this.id="FIXME";this._invocationMap={};this._invocationSeq=g.core.data.createSequence(1,1,g.core.data.SEQ_INT);this._sendChannel=k(oa,a);this._recvChannel=k(s,a);this._recvChannel.subscribe(this._receive,this)}function E(a){var a=a||{},b;if(E._instance)b=E._instance;else{b=E._instance=this;var d=!!window.history.pushState;b.urlHistoryMode=a.urlHistoryMode||Y.HISTORY;switch(b.urlHistoryMode){case Y.HASH:b.urlHistoryActualMode=
c;break;case Y.NONE:b.urlHistoryActualMode=e;break;case Y.FULLRELOAD:b.urlHistoryActualMode=h;break;case Y.HISTORY:case Y.HISTORY_OR_HASH:case Y.HISTORY_OR_ERROR:case Y.HISTORY_OR_NONE:case Y.HISTORY_OR_FULLRELOAD:d&&(b.urlHistoryActualMode=j)}if(!b.urlHistoryActualMode&&!d)switch(b.urlHistoryMode){case Y.HISTORY_OR_ERROR:m(Aa);return;case Y.HISTORY:case Y.HISTORY_OR_HASH:b.urlHistoryActualMode=c;break;case Y.HISTORY_OR_NONE:b.urlHistoryActualMode=e;break;case Y.HISTORY_OR_FULLRELOAD:b.urlHistoryActualMode=
h}b.urlHistoryActualMode||m(Ba,b.urlHistoryMode);a.baseUrl&&(d=new z(a.baseUrl),b._baseUrl=d.pathname.replace(/^\/?(.*?)\/?$/,"/$1/"));b._urlMaxLength=a.urlMaxLength||URL_MAX_LENGTH;var f=b._onChange;b._onChange=function(){return f.apply(b,arguments)}}a.routes&&(b._routes=b._routes.concat(a.routes));return b}function z(a){null!=a&&(a=a.match(z.regExp),this.href=a[0]||"",this.protocol=a[1]||"",this.host=a[2]||"",this.hostname=a[3]||"",this.port=a[4]||"",this.pathname=a[5]||"",this.dir=a[6]||"",this.file=
a[7]||"",this.search=a[8]||"",this.hash=a[9]||"")}function I(a){this.__controller=a}function O(){}function V(b){b=a(b);if(!1===b.children().eq(0).is("["+L+"],["+T+"]")){b.wrapInner(a("<div "+L+"></div>"));var c=b.attr(S);c&&b.removeAttr(S).children().attr(S,c)}}function fa(b,c,d){var e=g.async.deferred();g.ajax({url:b,dataType:"html",method:c||"get",data:d}).done(function(b){var c=b.replace(db,"").match(jb),b=c?"<div "+sa+" "+c[1]+">"+c[2]+"</div>":b;Pa.test(b)&&(b="<div "+M+">"+b+"</div>");b=a(b);
c=l(b,"["+W+"]");0===c.length&&(c=l(b,"main"));0<c.length&&(b=c.eq(0),b.attr(W,W));if(1<b.length||!a(b).is("["+W+"],["+M+"]")&&!b.is("["+sa+"]"))b=a("<div "+M+"></div>").append(b);V(b);e.resolve(b.children())}).fail(function(a){e.reject(a)});return e}function N(b,c,d){u(b)?c=fa(b,c,d):(c=g.async.deferred(),b=null==b?a(eb).get(0):g.u.obj.isJQueryObject(b)?b[0]:b,c.resolve(b));return c.promise()}function U(){}function ea(b,c){var d="";a.each(b,function(a,b){d&&(d+="&");if(!c&&("args"===a||"serverArgs"===
a))d+=ea(b,a);else if("serverArgs"===c){var e=encodeURIComponent(a);if(b instanceof Array){for(var f="",h=0;h<b.length;h++)f&&(f+="&"),f+=e+"[]",f+="=",f+=encodeURIComponent(b[h]);d+=f}else d+=e,d+="=",d+=encodeURIComponent(b)}else d="args"===c?d+encodeURIComponent(wa+a):d+encodeURIComponent(Oa+a),d+="=",d+=encodeURIComponent(g.u.obj.serialize(b).substring(2))});return d}function ca(b){ca._checkKeyRegExp||(ca._checkKeyRegExp=RegExp("^("+ta+"|"+Va+")?(.+)"),ca._checkArrayRegExp=/^(.*)\[\]$/);var c=
{},d=ca._checkKeyRegExp,e=ca._checkArrayRegExp;a.each(b.split("&"),function(a,b){var b=b.split("="),f=decodeURIComponent(b[0]),h=decodeURIComponent(b[1]),j=f.match(d);if(j){f=j[1]||"";j=j[2];if(!f){c.serverArgs=c.serverArgs||{};var k=j.match(e);if(k){k=k[1];k in c.serverArgs===false&&(c.serverArgs[k]=[]);c.serverArgs[k]instanceof Array&&c.serverArgs[k].push(h)}else c.serverArgs[j]=h}if(f===wa){c.args=c.args||{};c.args[j]=g.u.obj.deserialize(Fa+h)}else f===Oa&&(c[j]=g.u.obj.deserialize(Fa+h))}});return c}
function P(a){if(!a)return"";P._regExp||(P._regExp=RegExp("(^|&)(?:"+ta+"|"+Va+")[^=]*=.*?(?=&|$)","g"));var b=P._regExp,c=new z(a),a=c.pathname,c=c.search||"";(c=c.substring(1).replace(b,""))&&(c="?"+c);return a+c}function ba(a){var b=new z(a),a=b.pathname||"",b=ca((b.search||"").substring(1));b.to||(b.to=a);return b}function J(b){var b=a.extend(!0,{},b),c=b.to,d="",e="";na.test(c)||(delete b.to,c=P(c),e=new z(c),d=e.pathname,e=e.search);(b=ea(b))&&(e=e+(e?"&":"?")+b);return d+e}function ga(b,c){null==
b&&(b=a("<div></div>").get(0));a(b).is("["+ka+"]")&&m(ya);var d=c;c?a(b).is(":not(["+W+"])")&&a(b).attr(W,W):(a(b).is(":not(["+M+"])")&&a(b).attr(M,M),d=g.settings.scene.followTitle);d=ia.controllerInternal(b,La,{isMain:c,followTitle:d},{async:!1});a(b).attr(ka,ka);return d}function ja(){xa||(xa=!0,B())}function aa(a,b){return g.core.controllerManager.getControllers(a||document.body,{name:La.__name,deep:b&&!1===b.deep?!1:!0})}var S="data-h5-controller",G="data-h5-dyn-controller-bound",L="data-h5-default-scene",
T="data-h5-scene",M="data-h5-scene-container",W="data-h5-main-scene-container",ka="data-h5-dyn-container-bound",sa="data-h5-dyn-dummy-body",Fa="2|",la={NORMAL:"normal",ONCE:"once",SILENT:"silent"},da={GET:"get",POST:"post"},Y={HASH:"hash",HISTORY:"history",NONE:"none",FULLRELOAD:"fullreload",HISTORY_OR_HASH:"historyOrHash",HISTORY_OR_ERROR:"historyOrError",HISTORY_OR_NONE:"historyOrNone",HISTORY_OR_FULLRELOAD:"historyOrFullreload"};c="hash";j="history";e="none";h="fullreload";var oa="__h5__RMI",s=
"__h5__RMI_Result",qa=1E5,X=100001,ya=100007,Aa=100011,Ba=100012,Ga=ia.isDisposing,xa=!1,wa=g.settings.scene.clientQueryStringPrefix,Oa=g.settings.scene.clientFWQueryStringPrefix,ta=null,Va=null,Wa=g.settings.scene.urlHistoryMode,Ha=null,na=/Controller$/,Z=null,Q=null,Ia=null,Ja=null,Xa={__name:"h5.scene.DummyController"};g.mixin.eventDispatcher.mix(f.prototype);a.extend(f.prototype,{send:function(a){this._closed?alert("クローズ済みのチャネルです。送信できません。"):(a=new w(this.type,a),this._targetWindow.postMessage(g.u.obj.serialize(a),
location.origin))},subscribe:function(a,b){this._subscribers.push({func:a,thisObj:b?b:null})},close:function(){this._closed=!0;this.off(window,"message",this._recv)},_receiveMessage:function(a){var b;try{if(b=g.u.obj.deserialize(a.data),b.type!==this.type)return}catch(c){return}for(var a=this._subscribers,d=0,e=a.length;d<e;d++){var f=a[d];f.func.call(f.thisObj,b.data)}this.dispatchEvent({type:"message",data:b.data})}});var Sa={};a.extend(v.prototype,{_receive:function(a){var b=g.core.controllerManager.getControllers(document.body)[0],
c=a.id,d=a.method,a=a.args;!b[d]||F(b[d])?this._callFunction(c,b,d,a):this._sendChannel.send({id:c,isAsync:!1,status:4,result:null})},_callFunction:function(a,b,c,d){var d=K(d),e=void 0;try{e=b[c].apply(b,d)}catch(f){this._sendChannel.send({id:a,isAsync:!1,status:1,result:null});return}var h=this;g.async.isPromise(e)?e.done(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,isAsync:!0,status:2,result:b})}).fail(function(){var b=g.u.obj.argsToArray(arguments);h._sendChannel.send({id:a,
isAsync:!0,status:3,result:b})}):this._sendChannel.send({id:a,isAsync:!1,status:0,result:e})}});a.extend(A.prototype,{invoke:function(a,b){var c=g.async.deferred(),d={id:this._invocationSeq.next(),method:a,args:b};this._invocationMap[d.id]=c;this._sendChannel.send(d);return c.promise()},_receive:function(a){var b=a.id,c=this._invocationMap[b];if(c){delete this._invocationMap[b];var b=a.result,d=a.status;a.isAsync?2===d?c.resolve.apply(c,b):c.reject.apply(c,b):0===d?c.resolve(b):c.reject()}}});a.extend(E.prototype,
{_routes:[],_baseUrl:null,_started:!1,_urlMaxLength:null,_silentOnce:!1,urlHistoryMode:null,urlHistoryActualMode:null,_urlForSimulate:null,_onChange:function(){if(this._silentOnce)this._silentOnce=!1;else{var a,b=null;this._urlForSimulate?(a=this._urlForSimulate,b=this._contextualData,this._urlForSimulate=this._contextualData=null):(a=this._getRouterLocation(),a=a.pathname+a.search);for(var c=this._removeBaseUrl(a),d=null,e=0;e<this._routes.length;e++){var f=this._routes[e];if(u(f.test)){if(c===f.test){d=
f.func(a,b);break}}else if(f.test instanceof RegExp){if(f.test.test(c)){d=f.func(a,b);break}}else if("function"===typeof f.test&&f.test(c)){d=f.func(a,b);break}}d&&this.evaluate(d,b)}},start:function(b){b=b||{};if(!this._started)switch(this._checkUrlLength(location.href,{throwOnError:!0}),this._started=!0,(!b||!b.silent)&&this._onChange(),this.urlHistoryActualMode){case c:a(window).on("hashchange",this._onChange);break;case j:a(window).on("popstate",this._onChange)}},navigate:function(a,b){b=b||{};
if(this._started){this._checkUrlLength(a,{throwOnError:!0});var d=!1,f=this.urlHistoryActualMode;switch(b.mode){case "silent":d=!0;break;case "none":f=e;break;case "fullreload":f=h}var g=this._toAbusolute(a);switch(f){case c:d&&(this._silentOnce=!0);this.compareUrl(g)?this._onChange():b.replaceHistory?location.replace("#"+g):location.hash=g;break;case j:d&&(this._silentOnce=!0);this.compareUrl(g)||(b.replaceHistory?history.replaceState(null,null,g):history.pushState(null,null,g));this._onChange();
break;case h:this.compareUrl(g)?location.reload():b.replaceHistory?location.replace(g):location.href=g;break;case e:this.evaluate(g)}}},stop:function(){if(this._started)switch(this._started=!1,this.urlHistoryActualMode){case c:a(window).off("hashchange",this._onChange);break;case j:a(window).off("popstate",this._onChange)}},_checkUrlLength:function(a,b){b=b||{};if(null==this._urlMaxLength)return!0;if((new z(a)).protocol)return a.length<=this._urlMaxLength;var d=this._toAbusolute(a);this.urlHistoryActualMode===
c&&(d=window.location.pathname+(window.location.search||"")+"#"+d);d=R(d);b.writeBack&&(b.url=d,b.urlLength=d.length,b.urlMaxLength=this._urlMaxLength);return d.length<=this._urlMaxLength?!0:!1},_getBaseDir:function(){return this._baseUrl?this._baseUrl:this._getRouterLocation().dir},_removeBaseUrl:function(a){var b=this._baseUrl;b&&0===a.indexOf(b)&&(a=a.replace(b,""));return a},evaluate:function(a,b){this._urlForSimulate=this._toAbusolute(a);this._contextualData=b;this._onChange()},_toAbusolute:function(a){var b=
null,a=new z(a),b=this._getRouterLocation();a.isSearch()?b=b.pathname+a.search+a.hash:a.isHash()?b=b.pathname+b.search+a.hash:(b=a.pathname+a.search+a.hash,0!==b.indexOf("/")&&(b=this._getBaseDir()+b));b=R(b);a=new z(b);return a.pathname+a.search+a.hash},compareUrl:function(a,b){if(null==b)var c=this._getRouterLocation(),b=c.pathname+c.search;0!==a.indexOf("/")&&(a=this._toAbusolute(a));0!==b.indexOf("/")&&(b=this._toAbusolute(b));return a===b},_getRouterLocation:function(){return this.urlHistoryActualMode===
c&&location.hash?new z(location.hash.substring(1)):new z(location.href)}});a.extend(z.prototype,{href:void 0,protocol:void 0,host:void 0,hostname:void 0,port:void 0,pathname:void 0,dir:void 0,file:void 0,search:void 0,hash:void 0,isSearch:function(){return!this.protocol&&!this.host&&!this.pathname&&this.search},isHash:function(){return!this.protocol&&!this.host&&!this.pathname&&!this.search&&this.hash}});z.regExp=/^(?:(\w+:)?\/\/(([^\/:]+)(?::(\d+))?))?((\/?.*?)([^\/]*?))(\?.*?)?(#.*)?$/;window.opener&&
new v;a.extend(I.prototype,{navigate:function(a){Ga(this.__controller)||this.__controller.trigger("sceneChangeRequest",a)},getParentContainer:function(){if(Ga(this.__controller))return null;var a=y(this.__controller.rootElement);return!a?null:aa(a)[0]}});a.extend(function(a,b,c,d){this.window=a=window.open(a,b,c);this._isModal=!1;this._parentBlocker=null;this.setModal(!0===d?!0:!1);this._rmi=new A(a);this._watchChild()}.prototype,{invoke:function(a,b){return this._rmi.invoke(a,b)},getControllerProxy:function(){return new O},
setModal:function(a){this._isModal!=a&&(this._isModal?(this._parentBlocker.hide(),this._parentBlocker=null):this._parentBlocker=g.ui.indicator({target:"body",block:!0,message:"子ウィンドウを開いている間は操作できません。",showThrobber:!1}).show(),this._isModal=a)},close:function(){var a=g.async.deferred();this.window.close();return a.promise()},_watchChild:function(){var a=this,b=setInterval(function(){a.window.closed&&(clearInterval(b),a.setModal(!1))},300)}});var db=/<\!--(?:\s|\S)*?--\>/g,jb=/<body\b([^>]*)>((?:\s|\S)*?)(?:<\/body\s*>|<\/html\s*>|$)/i,
Pa=/^\s*(?!\s|<)/,eb='<div class="h5-scene"></div>';a.extend(U.prototype,{onChange:function(b,c){var d=g.async.deferred();a(b).empty();a(c).appendTo(b);d.resolve();return d.promise()},onChangeStart:function(a){this._ind=g.ui.indicator({target:a,block:!0,message:"遷移中..."}).show()},onChangeEnd:function(){this._ind.hide()}});var ra=null,pa={__name:"h5.scene.NotReshowableController",__init:function(b){b=b.args._notReshowableMessage;a(this.rootElement).html("<h1>"+b+"</h1>")}},La={__name:"h5.scene.SceneContainerController",
isMain:!1,_transition:null,_currentController:null,_isClickjackEnabled:!1,_dfd:null,_isNavigated:!1,_detour:{},_router:null,_first:!0,_title:"",__init:function(c){var c=c.args||{},d=this.rootElement,e=c.isMain,f=this;this.isMain=!!e;this.followTitle=e&&c.followTitle;this.isMain&&ra&&m(100003);this._containerName=a(d).attr(W)||a(d).attr(M);this._currentController=null;V(d);this._transition=new U;this._transition.onChangeStart(d);this.on("{rootElement}","sceneChangeRequest",this.own(this._onSceneChangeRequest));
this._router=Ja;if(this.isMain){ra=this;if(this._isClickjackEnabled)this.on("{a}","click",this.own(this._onAClick));Ha=this._router.urlHistoryActualMode;this._router.start()}else b(d).done(function(a){f._currentController=a;f._transition.onChangeEnd(f.rootElement,null,a.rootElement);f._transition=null;a=f._getTitleFromCurrentScene();null!=a&&f.setTitle(a)})},__dispose:function(){Ga(this._currentController)||this._currentController.dispose();this._currentController=null;this.isMain&&(this._router.stop(),
ra=this._router=null)},_onAClick:function(a){a.event.preventDefault();this.navigate(a.event.originalEvent.target.href)},_onSceneChangeRequest:function(a){a.event.stopPropagation();setTimeout(this.own(function(){this.navigate(a.evArg)}),0)},navigate:function(b){if(u(b))return this.navigate({to:b});this._navigateParam=b;b=a.extend(!0,{},b);this._transition=new U;this._transition.onChangeStart(this.rootElement,(this._currentController||{}).rootElement);var c=this._dfd=g.async.deferred();this._isNavigated=
!0;var d=b.to;if(this.isMain&&b.navigationType!==la.SILENT){u(d)||m(100004,[d]);-1!==d.indexOf("#")&&m(100005,[d]);b.method===da.POST&&(this._detour.serverArgs=b.serverArgs,delete b.serverArgs);if(b.navigationType===la.ONCE||b.method===da.POST)this._detour.args=g.u.obj.deserialize(g.u.obj.serialize(b.args)),delete b.args;d=b.replaceHistory;delete b.replaceHistory;b=J(b);this._router.navigate(b,{replaceHistory:d})}else b=J(b),this._router.evaluate(b,{container:this});return c.promise()},setTitle:function(a){this._title=
a;this.followTitle&&(document.title=a)},getTitle:function(){return this._title},_navigate:function(c,d){if(c){var d=d||{},e=(this._currentController||{}).rootElement;this._isNavigated||(this._transition=new U,this._transition.onChangeStart(this.rootElement,e));e&&D(e);var f=this,g=null;if(d.navigationType===la.ONCE||d.method===da.POST){if(!this._isNavigated){this._onNotReshowable(d);return}g=this._detour.args;delete this._detour.args}else g=d.args;e=null;d.method===da.POST?(e=this._detour.serverArgs,
delete this._detour.serverArgs):e=d.serverArgs;u(c)?na.test(c)?o(c,a("<div></div>"),g).done(function(a){f._navigateEnd(a,d)}):N(c,d.method,e).done(function(c){b(a("<div></div>").append(c),null,g).done(function(a){f._navigateEnd(a,d)})}).fail(function(a){m(100008,[c],a)}):c.__name&&na.test(c.__name)&&f._navigateEnd(c,d)}},_navigateEnd:function(b,c){var d=this,e=(this._currentController||{}).rootElement,f=b.rootElement;d._currentController=b;var g=c&&c.title;null==g?this._navigateParam&&na.test(this._navigateParam.to)&&
null!=b.sceneTitle?this.setTitle(b.sceneTitle):(g=this._getTitleFromCurrentScene(),null!=g&&this.setTitle(g)):this.setTitle(g);this._navigateParam=null;this._transition.onChange(this.rootElement,f).done(this.own(function(){this._dfd&&this._dfd.resolve({from:e,to:f});e&&a(e).remove();d._transition.onChangeEnd(d.rootElement,e,f);d._isNavigated=false;d._dfd=null;d._transition=null}))},_getTitleFromCurrentScene:function(){var b=this._currentController.rootElement,c=a(b).data("h5-scene-title");if(null!=
c)return c;b=a(b).find("title");if(b.length)return b.text()},_onNotReshowable:function(b){Q.__name&&na.test(Q.__name)?this._navigateEnd(ia.controllerInternal(a("<div></div>"),Q,{_notReshowableMessage:"この画面は再表示できません。"}),b):(b=null,b=u(Q)?{to:Q}:a.extend(!0,{},Q),b.args=b.args||{},b.args._notReshowableMessage="この画面は再表示できません。",this._navigate(b.to,b))},_defaultFuncForRouter:function(a){var d=this,e=ba(a),f=e.to;if(this.isMain&&this._first){if(e.navigationType===la.ONCE||e.method===da.POST){this._onNotReshowable(e);
this._first=!1;return}var g=f&&na.test(f),h=Ha===c&&location.hash.substring(1);if(this._router.compareUrl(a)&&!h&&!g){b(this.rootElement,null,e.args).done(function(a){d._currentController=a;d._transition.onChangeEnd(d.rootElement,null,a.rootElement);d._transition=null;a=d._getTitleFromCurrentScene();null!=a&&d.setTitle(a)});this._first=!1;return}}f=f||location.pathname+location.search;f=P(f);this._first&&(this._navigated=!0);this._navigate(f,e);this._first=!1}};ia.addControllerInstantiationHook(function(a){a.scene=
new I(a)});a(function(){wa=g.settings.scene.clientQueryStringPrefix;ta=wa.replace(/\\/g,"\\\\");Oa=g.settings.scene.clientFWQueryStringPrefix;Va=Oa.replace(/\\/g,"\\\\");Wa=g.settings.scene.urlHistoryMode;Z=parseInt(g.settings.scene.urlMaxLength);Q=pa;Ia=g.settings.scene.baseUrl;var b=[];g.settings.scene.routes&&(b=b.concat(g.settings.scene.routes));b=a.map(b,function(a){var b=a.test;if(F(b))var c=b,b=function(a){var b=ba(a);return c(a,b)};return{test:b,func:function(b,c){var c=c||{},d=a.navigationInfo;
if(F(d))var e=ba(b),d=d(b,e);if(null==d)return(c.container||ra)._defaultFuncForRouter(b),null;u(d)&&(d={to:d});return J(d)}}});b.push({test:/.*/,func:function(a,b){b=b||{};(b.container||ra)._defaultFuncForRouter(a)}});Ja=new E({routes:b,urlHistoryMode:Wa,baseUrl:Ia,urlMaxLength:Z});g.settings.scene.autoInit&&ja()});g.u.obj.expose("h5.scene",{createSceneContainer:ga,init:ja,getMainSceneContainer:function(){return ra},getSceneContainers:aa,getSceneContainerByName:function(a){if(null==a)return null;
var b=aa();if(0===b.length)return null;if(a){for(var c=0;c<b.length;c++)if(b[c]._containerName===a)return b[c];return null}return b[0]},navigationType:la,method:da,urlHistoryMode:Y})})()})(jQuery);